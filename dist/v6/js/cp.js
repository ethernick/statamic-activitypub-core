(function(e){"use strict";var x=document.createElement("style");x.textContent=`.ap-grid{display:grid;grid-template-columns:1fr;gap:1rem;align-items:start;margin-bottom:0}@media(min-width:768px){.ap-grid{grid-template-columns:1fr 1fr}}.ap-grid label{display:block;margin-bottom:.25rem;font-weight:700}.ap-grid p{margin-top:0;font-size:.75rem;line-height:1rem;color:#6b7280}.prose a span.invisible{width:0;display:inline-block;overflow:hidden;vertical-align:bottom}.prose a span.ellipsis:after{content:"..."}.delete-btn:hover,button.delete-btn:hover{color:#dc2626!important}.prose .quote-inline{display:none}.ap-stack-panel{display:flex;flex-direction:column;overflow:hidden;border-radius:.75rem;box-shadow:0 25px 50px -12px #00000040;background-color:#fff}.ap-stack-header{display:flex;align-items:center;justify-content:space-between;padding:.75rem 1.5rem;flex-shrink:0;border-bottom:1px solid #e5e5e5}.ap-stack-title{margin:0;font-size:1rem;font-weight:600;color:#171717}.ap-stack-close-btn{display:flex;align-items:center;justify-content:center;padding:.25rem;border:none;background:none;border-radius:.375rem;cursor:pointer;color:#a3a3a3}.ap-stack-close-btn:hover{color:#525252;background-color:#f5f5f5}.ap-stack-content{flex:1;overflow-y:auto}.ap-stack-footer{display:flex;justify-content:flex-end;gap:.5rem;padding:1rem;flex-shrink:0;border-top:1px solid #e5e5e5;background-color:#fafafa}.ap-stack-overlay{background:#17171780}html.dark .ap-stack-overlay,html.is-dark .ap-stack-overlay,html.isdark .ap-stack-overlay{background:#171717b3}html.dark .ap-stack-panel,html.is-dark .ap-stack-panel,html.isdark .ap-stack-panel{background-color:#171717}html.dark .ap-stack-header,html.is-dark .ap-stack-header,html.isdark .ap-stack-header{border-bottom-color:#262626}html.dark .ap-stack-title,html.is-dark .ap-stack-title,html.isdark .ap-stack-title{color:#f5f5f5}html.dark .ap-stack-close-btn,html.is-dark .ap-stack-close-btn,html.isdark .ap-stack-close-btn{color:#737373}html.dark .ap-stack-close-btn:hover,html.is-dark .ap-stack-close-btn:hover,html.isdark .ap-stack-close-btn:hover{color:#d4d4d4;background-color:#262626}html.dark .ap-stack-footer,html.is-dark .ap-stack-footer,html.isdark .ap-stack-footer{background-color:#262626;border-top-color:#262626}.ap-json-viewer{font-family:SF Mono,Fira Code,Fira Mono,Roboto Mono,monospace;font-size:.8125rem;line-height:1.5;white-space:pre;overflow:auto;background-color:#fafafa;color:#171717;border-radius:.375rem;padding:1rem}.ap-json-key{color:#db2777}.ap-json-string{color:#16a34a}.ap-json-number{color:#2563eb}.ap-json-bool{color:#ea580c}.ap-json-null{color:#737373;font-style:italic}html.dark .ap-json-viewer,html.is-dark .ap-json-viewer,html.isdark .ap-json-viewer{background-color:#171717;color:#e5e5e5}html.dark .ap-json-key,html.is-dark .ap-json-key,html.isdark .ap-json-key{color:#f38ba8}html.dark .ap-json-string,html.is-dark .ap-json-string,html.isdark .ap-json-string{color:#a6e3a1}html.dark .ap-json-number,html.is-dark .ap-json-number,html.isdark .ap-json-number{color:#89b4fa}html.dark .ap-json-bool,html.is-dark .ap-json-bool,html.isdark .ap-json-bool{color:#fab387}html.dark .ap-json-null,html.is-dark .ap-json-null,html.isdark .ap-json-null{color:#a3a3a3;font-style:italic}.ap-reply-card{background-color:#fff;border-color:#e5e5e5}.ap-reply-input{background-color:#fff;border-color:#d4d4d4;color:#171717}html.dark .ap-reply-card,html.is-dark .ap-reply-card,html.isdark .ap-reply-card{background-color:#262626;border-color:#404040}html.dark .ap-reply-input,html.is-dark .ap-reply-input,html.isdark .ap-reply-input{background-color:#171717;border-color:#404040;color:#d4d4d4}.ap-filter-container{background-color:#e5e7eb;border-color:#e5e7eb}html.dark .ap-filter-container,html.is-dark .ap-filter-container,html.isdark .ap-filter-container{background-color:#171717;border-color:#262626}.ap-filter-btn.active{background-color:#fff;color:#111827;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.ap-filter-btn.inactive{color:#6b7280;font-weight:400}.ap-filter-btn.inactive:hover{color:#374151}html.dark .ap-filter-btn.active,html.is-dark .ap-filter-btn.active,html.isdark .ap-filter-btn.active{background-color:#404040;color:#f5f5f5}html.dark .ap-filter-btn.inactive,html.is-dark .ap-filter-btn.inactive,html.isdark .ap-filter-btn.inactive{color:#a3a3a3}html.dark .ap-filter-btn.inactive:hover,html.is-dark .ap-filter-btn.inactive:hover,html.isdark .ap-filter-btn.inactive:hover{color:#e5e5e5}.ap-new-note-btn{padding-left:.75rem;border-top-left-radius:.5rem!important;border-bottom-left-radius:.5rem!important}.ap-dropdown-menu{background-color:#fff;border-color:#f3f4f6}.ap-dropdown-item{color:#374151}.ap-dropdown-item:hover{background-color:#f3f4f6}html.dark .ap-dropdown-menu,html.is-dark .ap-dropdown-menu,html.isdark .ap-dropdown-menu{background-color:#1f2937;border-color:#374151;color:#e5e7eb}html.dark .ap-dropdown-item,html.is-dark .ap-dropdown-item,html.isdark .ap-dropdown-item{color:#e5e7eb}html.dark .ap-dropdown-item:hover,html.is-dark .ap-dropdown-item:hover,html.isdark .ap-dropdown-item:hover{background-color:#374151}.btn{display:inline-flex;align-items:center;font-size:.875rem;font-weight:500;line-height:1.25rem;padding:.5rem 1rem;height:2.375rem;border-radius:.25rem;border:1px solid #D3DDE7;background:linear-gradient(180deg,#fff,#f9fafb);background-clip:padding-box;color:#1f2937;cursor:pointer;outline:none}.btn:hover:not(:disabled){background:linear-gradient(180deg,#f3f4f6,#eef2ff)}.btn:disabled{opacity:.6;cursor:not-allowed}.btn-sm{padding:.25rem .5rem;height:2rem}.btn-primary{color:#fff;background:linear-gradient(to bottom,#3b82f6,#2563eb);background-clip:padding-box;border:1px solid #1d4ed8;border-bottom-color:#1e40af;box-shadow:inset 0 1px #60a5fa,0 1px #191e230d,0 3px 2px -1px #1e3a8a26}.btn-primary:hover:not(:disabled){background:linear-gradient(to bottom,#2563eb,#1d4ed8)}.btn-primary:disabled{opacity:.6;cursor:not-allowed}html.dark .btn,html.is-dark .btn,html.isdark .btn{background:linear-gradient(180deg,#2d2d2d,#262626);border-color:#444;color:#e5e5e5}html.dark .btn:hover:not(:disabled),html.is-dark .btn:hover:not(:disabled),html.isdark .btn:hover:not(:disabled){background:linear-gradient(180deg,#3a3a3a,#333)}html.dark .btn-primary,html.is-dark .btn-primary,html.isdark .btn-primary{background:linear-gradient(to bottom,#2563eb,#1d4ed8);border-color:#1e40af;border-bottom-color:#1e3a8a;color:#fff}html.dark .btn-primary:hover:not(:disabled),html.is-dark .btn-primary:hover:not(:disabled),html.isdark .btn-primary:hover:not(:disabled){background:linear-gradient(to bottom,#1d4ed8,#1e40af)}.pagination-container nav[data-v-5bd1ae8c]{display:flex;justify-content:center}.ease-spring[data-v-5bd1ae8c]{transition-timing-function:cubic-bezier(.16,1,.3,1)}.drawer[data-v-5bd1ae8c]{height:calc(100vh - 3.25rem);margin-top:3.25rem}.settings-panel-description{padding-left:.5em}
/*$vite$:1*/`,document.head.appendChild(x);const p=(n,t)=>{const o=n.__vccOpts||n;for(const[c,l]of t)o[c]=l;return o},N={name:"InboxNote",props:{note:{type:Object,required:!0},permissions:{type:Object,default:()=>({update:!1,delete:!1})}},data(){return{isVoting:!1,selectedOptions:[],openEndedResponse:""}},methods:{hasVoted(n){return n.has_voted||n.closed},getPercentage(n,t){return!t.voters_count||t.voters_count===0?0:Math.round(n.count/t.voters_count*100)},formatTime(n){return new Date(n).toLocaleString()},submitVote(n){if(this.isVoting)return;let t=[];if(!n.options||n.options.length===0){if(!this.openEndedResponse.trim())return;t.push(this.openEndedResponse)}else if(Array.isArray(this.selectedOptions)?t=this.selectedOptions.map(c=>c.name):this.selectedOptions&&(t=[this.selectedOptions.name]),t.length===0)return;this.isVoting=!0;const o=(c,l=!0)=>{this.$emit("vote",{note:n,option:{name:c},callback:s=>{l&&(this.isVoting=!1,s&&(n.has_voted=!0,n.voters_count=(n.voters_count||0)+1,n.options&&t.forEach(i=>{const r=n.options.find(d=>d.name===i);r&&(r.count=(r.count||0)+1)})))}})};t.forEach((c,l)=>{o(c,l===t.length-1)})}}},V={class:"hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors"},E={key:0,class:"px-4 pt-3 flex items-center gap-2 text-gray-500 text-sm"},B={class:"font-semibold text-gray-600 dark:text-gray-400"},C={class:"flex-shrink-0"},S=["src"],j={class:"flex-1 min-w-0"},D={class:"flex items-baseline justify-between gap-2"},$={class:"flex items-center gap-2 min-w-0"},F={class:"font-bold truncate"},M=["title"],U={class:"flex items-center gap-2 flex-shrink-0"},T=["title"],L=["innerHTML"],P={key:2,class:"mt-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},A={class:"flex justify-between items-center mb-2"},I={key:0,class:"text-xs font-bold text-red-500"},H={key:1,class:"text-xs text-gray-400"},z={key:0,class:"flex flex-col gap-2"},R={key:0,class:"p-3 bg-gray-100 dark:bg-gray-700 rounded text-sm text-gray-500 italic"},q=["disabled"],O={class:"flex justify-end mt-2"},J=["disabled"],Q={key:1,class:"flex flex-col gap-2"},W={class:"relative flex items-center justify-between p-2 border border-blue-200 dark:border-blue-800 rounded z-10"},Z={class:"text-sm font-medium"},K={class:"text-xs text-gray-500"},G={key:1,class:"relative flex items-center p-2 border border-gray-200 dark:border-gray-700 rounded hover:bg-white dark:hover:bg-gray-700 cursor-pointer transition-colors"},X=["value"],Y=["value"],v={class:"text-sm font-medium"},ee={key:0,class:"flex justify-end mt-2"},te=["disabled"],oe={class:"mt-2 text-xs text-gray-400 text-right"},ne={key:3,class:"mt-3 flex gap-2"},le=["onClick"],re=["src","alt"],se=["innerHTML"],ie=["href"],ae={class:"flex flex-col sm:flex-row h-full"},de={key:0,class:"sm:w-1/3 h-48 sm:h-auto relative overflow-hidden bg-gray-100 dark:bg-gray-900"},ce=["src"],me={class:"p-4 flex flex-col justify-center flex-1 min-w-0"},pe={class:"font-bold text-sm line-clamp-2 mb-1"},ge={class:"text-xs text-gray-500 line-clamp-2 mb-2"},he={class:"flex items-center gap-2 mt-auto"},be=["src"],ke={class:"text-xs text-gray-400 uppercase tracking-wider"},fe={class:"mt-3 flex items-center gap-6 text-sm text-gray-500"},ye=["title"],xe={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},we={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ue=["fill"],_e=["href"],Ne={key:6,class:"mt-4 pt-4 border-l-4 border-gray-300 dark:border-gray-600 pl-4 ml-2 bg-gray-50/50 dark:bg-gray-800/30 rounded-r-lg"},Ve={key:7,class:"mt-4 pt-4 border-l-4 border-purple-300 dark:border-purple-600 pl-4 ml-2 bg-purple-50/50 dark:bg-purple-900/10 rounded-r-lg"};function Ee(n,t,o,c,l,s){const i=e.resolveComponent("inbox-note",!0);return e.openBlock(),e.createElementBlock("div",V,[o.note.is_boost&&o.note.boosted_by?(e.openBlock(),e.createElementBlock("div",E,[t[37]||(t[37]=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),e.createElementVNode("span",B,e.toDisplayString(o.note.boosted_by.name),1),t[38]||(t[38]=e.createElementVNode("span",{class:"text-gray-400"},"boosted",-1))])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([{"px-4 pb-4 pt-1":o.note.is_boost,"p-4":!o.note.is_boost},"flex gap-4"])},[e.createElementVNode("div",C,[e.createElementVNode("img",{src:o.note.actor.avatar||"https://www.gravatar.com/avatar/?d=mp",loading:"lazy",class:"w-12 h-12 rounded-full bg-gray-200 object-cover"},null,8,S)]),e.createElementVNode("div",j,[e.createElementVNode("div",D,[e.createElementVNode("div",$,[e.createElementVNode("span",F,e.toDisplayString(o.note.actor.name),1),e.createElementVNode("span",{class:"text-sm text-gray-500 truncate",title:o.note.actor.handle},e.toDisplayString(o.note.actor.handle),9,M)]),e.createElementVNode("div",U,[e.createElementVNode("span",{class:"text-xs text-gray-400 whitespace-nowrap",title:o.note.date},e.toDisplayString(o.note.date_human),9,T),o.note.is_internal&&o.permissions.update?(e.openBlock(),e.createElementBlock("button",{key:0,class:"text-gray-400 hover:text-blue-500 transition-colors",onClick:t[0]||(t[0]=r=>n.$emit("edit",o.note)),title:"Edit"},[...t[39]||(t[39]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])])):e.createCommentVNode("",!0),o.permissions.delete?(e.openBlock(),e.createElementBlock("button",{key:1,onClick:t[1]||(t[1]=r=>n.$emit("delete",o.note)),class:"text-gray-400 transition-colors delete-btn",title:"Delete"},[...t[40]||(t[40]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])):e.createCommentVNode("",!0)])]),o.note.sensitive?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:t[2]||(t[2]=r=>o.note.showContent=!o.note.showContent),class:"mb-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded text-sm flex items-center gap-2 text-yellow-800 dark:text-yellow-200 cursor-pointer select-none"},[t[41]||(t[41]=e.createElementVNode("span",null,"⚠️",-1)),e.createElementVNode("span",null,e.toDisplayString(o.note.summary||"Sensitive Content"),1)])):e.createCommentVNode("",!0),!o.note.sensitive||o.note.showContent?(e.openBlock(),e.createElementBlock("div",{key:1,class:"mt-2 prose dark:prose-invert text-sm max-w-none break-words",innerHTML:o.note.content},null,8,L)):e.createCommentVNode("",!0),o.note.type==="question"?(e.openBlock(),e.createElementBlock("div",P,[e.createElementVNode("div",A,[t[42]||(t[42]=e.createElementVNode("span",{class:"text-xs font-bold uppercase text-gray-500"},"Poll",-1)),o.note.closed?(e.openBlock(),e.createElementBlock("span",I,"Closed")):o.note.end_time?(e.openBlock(),e.createElementBlock("span",H,"Ends "+e.toDisplayString(s.formatTime(o.note.end_time)),1)):e.createCommentVNode("",!0)]),!o.note.options||o.note.options.length===0?(e.openBlock(),e.createElementBlock("div",z,[s.hasVoted(o.note)||o.note.closed?(e.openBlock(),e.createElementBlock("div",R," Open-ended responses are hidden. ")):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[3]||(t[3]=r=>l.openEndedResponse=r),class:"input-text w-full text-sm",rows:"3",placeholder:"Type your answer...",disabled:l.isVoting},null,8,q),[[e.vModelText,l.openEndedResponse]]),e.createElementVNode("div",O,[e.createElementVNode("button",{onClick:t[4]||(t[4]=r=>s.submitVote(o.note)),disabled:l.isVoting||!l.openEndedResponse.trim(),class:"btn-primary text-xs px-3 py-1.5"},e.toDisplayString(l.isVoting?"Submitting...":"Submit Answer"),9,J)])],64))])):(e.openBlock(),e.createElementBlock("div",Q,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.note.options,(r,d)=>(e.openBlock(),e.createElementBlock("div",{key:d,class:"relative"},[s.hasVoted(o.note)||o.note.closed?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("div",{class:"absolute inset-y-0 left-0 bg-blue-100 dark:bg-blue-900/30 rounded",style:e.normalizeStyle({width:s.getPercentage(r,o.note)+"%"})},null,4),e.createElementVNode("div",W,[e.createElementVNode("span",Z,e.toDisplayString(r.name),1),e.createElementVNode("span",K,e.toDisplayString(s.getPercentage(r,o.note))+"% ("+e.toDisplayString(r.count)+") ",1)])],64)):(e.openBlock(),e.createElementBlock("label",G,[o.note.multiple_choice?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,type:"checkbox",value:r,"onUpdate:modelValue":t[5]||(t[5]=a=>l.selectedOptions=a),class:"mr-2 text-blue-600 focus:ring-blue-500 rounded"},null,8,X)),[[e.vModelCheckbox,l.selectedOptions]]):e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:1,type:"radio",value:r,"onUpdate:modelValue":t[6]||(t[6]=a=>l.selectedOptions=a),class:"mr-2 text-blue-600 focus:ring-blue-500"},null,8,Y)),[[e.vModelRadio,l.selectedOptions]]),e.createElementVNode("span",v,e.toDisplayString(r.name),1)]))]))),128)),!s.hasVoted(o.note)&&!o.note.closed?(e.openBlock(),e.createElementBlock("div",ee,[e.createElementVNode("button",{onClick:t[7]||(t[7]=r=>s.submitVote(o.note)),disabled:l.isVoting||!l.openEndedResponse&&l.selectedOptions.length===0&&!l.selectedOptions.name,class:"btn-primary text-xs px-3 py-1.5"},e.toDisplayString(l.isVoting?"Voting...":"Vote"),9,te)])):e.createCommentVNode("",!0)])),e.createElementVNode("div",oe,e.toDisplayString(o.note.voters_count)+" votes ",1)])):e.createCommentVNode("",!0),o.note.attachments&&o.note.attachments.length>0?(e.openBlock(),e.createElementBlock("div",ne,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.note.attachments.slice(0,3),(r,d)=>(e.openBlock(),e.createElementBlock("div",{key:d,class:"relative flex-1 cursor-pointer group overflow-hidden rounded-lg",onClick:a=>n.$emit("lightbox",{attachments:o.note.attachments,index:d})},[e.createElementVNode("img",{src:r.url,alt:r.description,class:"w-full h-full object-cover transition-transform group-hover:scale-[1.02]",loading:"lazy"},null,8,re)],8,le))),128))])):e.createCommentVNode("",!0),o.note.oembed&&o.note.oembed.html?(e.openBlock(),e.createElementBlock("div",{key:4,class:"mt-3",innerHTML:o.note.oembed.html},null,8,se)):e.createCommentVNode("",!0),o.note.link_preview&&!o.note.oembed?(e.openBlock(),e.createElementBlock("a",{key:5,href:o.note.link_preview.url,target:"_blank",class:"block mt-3 border rounded-lg overflow-hidden hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group no-underline"},[e.createElementVNode("div",ae,[o.note.link_preview.image?(e.openBlock(),e.createElementBlock("div",de,[e.createElementVNode("img",{src:o.note.link_preview.image,class:"absolute inset-0 w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",loading:"lazy"},null,8,ce)])):e.createCommentVNode("",!0),e.createElementVNode("div",me,[e.createElementVNode("h3",pe,e.toDisplayString(o.note.link_preview.title),1),e.createElementVNode("p",ge,e.toDisplayString(o.note.link_preview.description),1),e.createElementVNode("div",he,[o.note.link_preview.icon?(e.openBlock(),e.createElementBlock("img",{key:0,src:o.note.link_preview.icon,class:"w-4 h-4 rounded-sm"},null,8,be)):e.createCommentVNode("",!0),e.createElementVNode("span",ke,e.toDisplayString(o.note.link_preview.site_name||"Link"),1)])])])],8,ie)):e.createCommentVNode("",!0),e.createElementVNode("div",fe,[["note","question"].includes(o.note.type)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[o.note.sensitive?(e.openBlock(),e.createElementBlock("button",{key:0,class:"flex items-center gap-1 hover:text-blue-500 transition-colors",onClick:t[8]||(t[8]=r=>o.note.showContent=!o.note.showContent),title:o.note.showContent?"Hide Content":"Show Content"},[o.note.showContent?(e.openBlock(),e.createElementBlock("svg",we,[...t[44]||(t[44]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",xe,[...t[43]||(t[43]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))],8,ye)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"flex items-center gap-1 text-gray-500 hover:text-blue-500 transition-colors",onClick:t[9]||(t[9]=r=>n.$emit("reply",o.note)),title:"Reply"},[...t[45]||(t[45]=[e.createElementVNode("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})],-1)])]),e.createElementVNode("button",{class:e.normalizeClass(["flex items-center gap-1 transition-colors",o.note.boosted_by_user?"text-green-600":"text-gray-500 hover:text-blue-500"]),onClick:t[10]||(t[10]=r=>n.$emit("boost",o.note)),title:"Boost"},[...t[46]||(t[46]=[e.createElementVNode("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],2),e.createElementVNode("button",{class:"flex items-center gap-1 text-gray-500 hover:text-blue-500 transition-colors",onClick:t[11]||(t[11]=r=>n.$emit("quote",o.note)),title:"Quote"},[...t[47]||(t[47]=[e.createElementVNode("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})],-1)])]),e.createElementVNode("button",{class:e.normalizeClass(["flex items-center gap-1 transition-colors",o.note.liked_by_user?"text-yellow-500":"text-gray-500 hover:text-blue-500"]),onClick:t[12]||(t[12]=r=>n.$emit("like",o.note)),title:"Like"},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:o.note.liked_by_user?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...t[48]||(t[48]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"},null,-1)])],8,ue)),e.createElementVNode("span",null,e.toDisplayString(o.note.counts?.likes||0),1)],2),o.note.related_activity_count>0||o.note.related_activity_count?(e.openBlock(),e.createElementBlock("button",{key:1,class:"flex items-center gap-1 text-gray-500 hover:text-blue-500 transition-colors",onClick:t[13]||(t[13]=r=>n.$emit("history",o.note)),title:"View History"},[...t[49]||(t[49]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])])):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"flex items-center gap-1 text-gray-500 hover:text-blue-500 transition-colors",onClick:t[14]||(t[14]=r=>n.$emit("thread",o.note)),title:"View Thread"},[t[50]||(t[50]=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 492.43313 470.25731"},[e.createElementVNode("g",{transform:"matrix(0.75674108,0,0,0.70536422,57.817645,55.147289)"},[e.createElementVNode("path",{d:"m 16.695312,-2.5546875 c -10.7064892,0 -19.2499995,8.5435103 -19.2499995,19.2499995 v 38.957032 c 0,29.137041 23.5058235,52.640626 52.6425785,52.640626 H 64.228516 V 403.70703 H 50.087891 c -29.136755,0 -52.6425785,23.50358 -52.6425785,52.64063 v 38.95703 c 0,10.7065 8.5434901,19.25 19.2499995,19.25 H 384 c 10.71306,0 19.25,-8.53506 19.25,-19.25 v -38.95703 c 0,-29.13649 -23.50414,-52.64063 -52.64063,-52.64063 H 336.4668 v -28.2832 h 30.83789 c 38.29372,10e-6 69.33789,-31.04205 69.33789,-69.33594 v -66.7832 c 0,-17.11722 13.71869,-30.83789 30.83594,-30.83789 h 27.82617 c 10.71308,0 19.25,-8.53502 19.25,-19.25 0,-10.7065 -8.54352,-19.25 -19.25,-19.25 h -27.82617 c -38.29404,0 -69.33789,31.04386 -69.3379,69.33789 v 66.7832 c 0,17.11687 -13.71907,30.83594 -30.83593,30.83594 H 336.4668 V 108.29297 h 14.14257 c 29.13649,0 52.64063,-23.504139 52.64063,-52.640626 V 16.695312 C 403.25,5.9803688 394.71306,-2.5546875 384,-2.5546875 Z m 19.25,38.4999995 H 364.75 v 19.707032 c 0,7.961761 -6.18114,14.140625 -14.14258,14.140625 H 50.087891 c -7.961438,0 -14.142579,-6.178863 -14.142579,-14.140625 z M 102.72852,108.29297 H 297.9668 v 28.2832 H 102.72852 Z m 0,66.7832 H 297.9668 v 28.28125 H 102.72852 Z m 0,66.7832 H 297.9668 v 28.28125 H 102.72852 Z m 0,66.78321 H 297.9668 v 28.28125 H 102.72852 Z m 0,66.78125 H 297.9668 v 28.2832 H 102.72852 Z m -52.640629,66.7832 H 350.60937 c 7.96039,0 14.14063,6.18025 14.14063,14.14063 v 19.70703 H 35.945312 v -19.70703 c 0,-7.96177 6.181139,-14.14063 14.142579,-14.14063 z"})])],-1)),e.createElementVNode("span",null,e.toDisplayString(o.note.counts?.replies||0),1)])],64)):e.createCommentVNode("",!0),o.note.actions&&o.note.actions.view?(e.openBlock(),e.createElementBlock("a",{key:1,href:o.note.actions.view,target:"_blank",class:"flex items-center gap-1 text-gray-500 hover:text-blue-500 transition-colors",title:"View Original"},[...t[51]||(t[51]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)])],8,_e)):e.createCommentVNode("",!0),o.note.activitypub_json?(e.openBlock(),e.createElementBlock("button",{key:2,class:"flex items-center gap-1 text-gray-500 hover:text-blue-500 transition-colors",onClick:t[15]||(t[15]=r=>n.$emit("json",o.note)),title:"View Activity JSON"},[...t[52]||(t[52]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})],-1)])])):e.createCommentVNode("",!0)]),o.note.parent?(e.openBlock(),e.createElementBlock("div",Ne,[t[53]||(t[53]=e.createElementVNode("div",{class:"text-xs text-gray-500 mb-2 flex items-center gap-1 font-semibold uppercase tracking-wider"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})]),e.createTextVNode(" In reply to: ")],-1)),e.createVNode(i,{note:o.note.parent,permissions:o.permissions,onReply:t[16]||(t[16]=r=>n.$emit("reply",r)),onBoost:t[17]||(t[17]=r=>n.$emit("boost",r)),onLike:t[18]||(t[18]=r=>n.$emit("like",r)),onHistory:t[19]||(t[19]=r=>n.$emit("history",r)),onThread:t[20]||(t[20]=r=>n.$emit("thread",r)),onJson:t[21]||(t[21]=r=>n.$emit("json",r)),onLightbox:t[22]||(t[22]=r=>n.$emit("lightbox",r)),onDelete:t[23]||(t[23]=r=>n.$emit("delete",r)),onEdit:t[24]||(t[24]=r=>n.$emit("edit",r)),onVote:t[25]||(t[25]=r=>n.$emit("vote",r))},null,8,["note","permissions"])])):e.createCommentVNode("",!0),o.note.quote?(e.openBlock(),e.createElementBlock("div",Ve,[t[54]||(t[54]=e.createElementVNode("div",{class:"text-xs text-gray-500 mb-2 flex items-center gap-1 font-semibold uppercase tracking-wider"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})]),e.createTextVNode(" Quoting: ")],-1)),e.createVNode(i,{note:o.note.quote,permissions:o.permissions,onReply:t[26]||(t[26]=r=>n.$emit("reply",r)),onBoost:t[27]||(t[27]=r=>n.$emit("boost",r)),onQuote:t[28]||(t[28]=r=>n.$emit("quote",r)),onLike:t[29]||(t[29]=r=>n.$emit("like",r)),onHistory:t[30]||(t[30]=r=>n.$emit("history",r)),onThread:t[31]||(t[31]=r=>n.$emit("thread",r)),onJson:t[32]||(t[32]=r=>n.$emit("json",r)),onLightbox:t[33]||(t[33]=r=>n.$emit("lightbox",r)),onDelete:t[34]||(t[34]=r=>n.$emit("delete",r)),onEdit:t[35]||(t[35]=r=>n.$emit("edit",r)),onVote:t[36]||(t[36]=r=>n.$emit("vote",r))},null,8,["note","permissions"])])):e.createCommentVNode("",!0),e.renderSlot(n.$slots,"reply-editor")])],2)])}const k=p(N,[["render",Ee]]),Be={props:{open:{type:Boolean,default:!1},title:{type:String,default:""},inset:{type:Boolean,default:!1}},emits:["closed"],mounted(){document.body.appendChild(this.$el)},watch:{open(n){n?(document.body.style.overflow="hidden",this._escHandler=t=>{t.key==="Escape"&&this.$emit("closed")},document.addEventListener("keydown",this._escHandler)):(document.body.style.overflow="",this._escHandler&&document.removeEventListener("keydown",this._escHandler))}},beforeUnmount(){this.cleanup()},beforeDestroy(){this.cleanup()},methods:{cleanup(){document.body.style.overflow="",this._escHandler&&document.removeEventListener("keydown",this._escHandler),this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}}},Ce={key:0,style:{position:"fixed",inset:"0","z-index":"9999"}},Se={key:0,class:"ap-stack-header"},je={class:"ap-stack-title"},De={style:{height:"1rem",width:"1rem"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},$e={key:1,class:"ap-stack-footer"};function Fe(n,t,o,c,l,s){return e.openBlock(),e.createElementBlock("div",null,[o.open?(e.openBlock(),e.createElementBlock("div",Ce,[e.createElementVNode("div",{class:"ap-stack-overlay",style:{position:"absolute",inset:"0"},onClick:t[0]||(t[0]=i=>n.$emit("closed"))}),e.createElementVNode("div",{class:"ap-stack-panel",style:{position:"absolute",top:"0.5rem",bottom:"0.5rem",right:"0.5rem",width:"100%","max-width":"48rem"},onClick:t[2]||(t[2]=e.withModifiers(()=>{},["stop"]))},[o.title?(e.openBlock(),e.createElementBlock("div",Se,[e.createElementVNode("h2",je,e.toDisplayString(o.title),1),e.createElementVNode("button",{onClick:t[1]||(t[1]=i=>n.$emit("closed")),class:"ap-stack-close-btn"},[(e.openBlock(),e.createElementBlock("svg",De,[...t[3]||(t[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])]))])])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"ap-stack-content",style:e.normalizeStyle({padding:o.inset?"0":"1.5rem"})},[e.renderSlot(n.$slots,"default")],4),n.$slots["footer-end"]?(e.openBlock(),e.createElementBlock("div",$e,[e.renderSlot(n.$slots,"footer-end")])):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0)])}const b=p(Be,[["render",Fe]]),Me={components:{InboxStack:b},props:{open:{type:Boolean,required:!0},content:{type:[String,Object],default:""}},methods:{highlightJson(n){return typeof n!="string"&&(n=JSON.stringify(n,void 0,2)),n?(n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),n.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(t){var o="ap-json-number";return/^"/.test(t)?/:$/.test(t)?o="ap-json-key":o="ap-json-string":/true|false/.test(t)?o="ap-json-bool":/null/.test(t)&&(o="ap-json-null"),'<span class="'+o+'">'+t+"</span>"})):""}}},Ue=["innerHTML"];function Te(n,t,o,c,l,s){const i=e.resolveComponent("inbox-stack");return e.openBlock(),e.createBlock(i,{open:o.open,onClosed:t[1]||(t[1]=r=>n.$emit("close")),title:"ActivityPub JSON",inset:""},{"footer-end":e.withCtx(()=>[e.createElementVNode("button",{onClick:t[0]||(t[0]=r=>n.$emit("close")),class:"relative inline-flex items-center justify-center whitespace-nowrap shrink-0 font-medium antialiased cursor-pointer no-underline disabled:[&_svg]:opacity-30 disabled:cursor-not-allowed [&_svg]:shrink-0 dark:[&_svg]:text-white bg-white hover:bg-gray-50 text-gray-800 border border-gray-300 shadow-sm px-4 h-10 text-sm rounded-lg dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-700"},"Close")]),default:e.withCtx(()=>[e.createElementVNode("pre",{class:"ap-json-viewer",innerHTML:s.highlightJson(o.content)},null,8,Ue)]),_:1},8,["open"])}const Le=p(Me,[["render",Te]]),Pe={components:{InboxStack:b},props:{open:{type:Boolean,required:!0},noteId:{type:[String,Number],default:null},apiUrl:{type:String,required:!0}},data(){return{loading:!1,activities:[]}},watch:{open(n){n&&this.noteId&&this.fetchHistory()},noteId(n){this.open&&n&&this.fetchHistory()}},methods:{fetchHistory(){this.loading=!0,this.activities=[],fetch(`${this.apiUrl}/history/${this.noteId}`).then(n=>n.json()).then(n=>{this.activities=n}).finally(()=>{this.loading=!1})}}},Ae={key:0,class:"py-8 text-center text-gray-500"},Ie={key:1,class:"py-8 text-center text-gray-500"},He={key:2,class:"flex flex-col divide-y dark:divide-dark-800"},ze={class:"flex gap-3"},Re={class:"flex-shrink-0"},qe=["src"],Oe={class:"flex-1 min-w-0"},Je={class:"flex items-center justify-between gap-2"},Qe={class:"flex items-center gap-2"},We={class:"font-bold text-sm"},Ze={class:"text-xs text-gray-500"},Ke={class:"text-xs text-gray-400"},Ge=["innerHTML"],Xe={class:"mt-2 flex items-center gap-3"},Ye=["onClick"],ve=["href"];function et(n,t,o,c,l,s){const i=e.resolveComponent("inbox-stack");return e.openBlock(),e.createBlock(i,{open:o.open,onClosed:t[0]||(t[0]=r=>n.$emit("close")),title:"Activity History",inset:""},{default:e.withCtx(()=>[l.loading?(e.openBlock(),e.createElementBlock("div",Ae," Loading history... ")):l.activities.length===0?(e.openBlock(),e.createElementBlock("div",Ie," No related activities found. ")):(e.openBlock(),e.createElementBlock("div",He,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.activities,r=>(e.openBlock(),e.createElementBlock("div",{key:r.id,class:"p-4 hover:bg-gray-50 dark:hover:bg-dark-800 transition-colors"},[e.createElementVNode("div",ze,[e.createElementVNode("div",Re,[e.createElementVNode("img",{src:r.actor.avatar||"https://www.gravatar.com/avatar/?d=mp",loading:"lazy",class:"w-10 h-10 rounded-full bg-gray-200 object-cover"},null,8,qe)]),e.createElementVNode("div",Oe,[e.createElementVNode("div",Je,[e.createElementVNode("div",Qe,[e.createElementVNode("span",We,e.toDisplayString(r.actor.name),1),e.createElementVNode("span",Ze,e.toDisplayString(r.type),1)]),e.createElementVNode("span",Ke,e.toDisplayString(r.date_human),1)]),e.createElementVNode("div",{class:"text-sm mt-1 text-gray-700 dark:text-gray-300",innerHTML:r.content},null,8,Ge),e.createElementVNode("div",Xe,[r.activitypub_json?(e.openBlock(),e.createElementBlock("button",{key:0,class:"flex items-center gap-1 text-xs text-gray-400 hover:text-blue-500 transition-colors",onClick:d=>n.$emit("view-json",r),title:"View JSON"},[...t[1]||(t[1]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})],-1)])],8,Ye)):e.createCommentVNode("",!0),r.object?(e.openBlock(),e.createElementBlock("a",{key:1,href:typeof r.object=="string"?r.object:r.object.id,target:"_blank",class:"flex items-center gap-1 text-xs text-gray-400 hover:text-blue-500 transition-colors",title:"View Source"},[...t[2]||(t[2]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)])],8,ve)):e.createCommentVNode("",!0)])])])]))),128))]))]),_:1},8,["open"])}const tt=p(Pe,[["render",et]]),ot={props:{actors:{type:Array,default:()=>[]},actorId:{type:[String,Number],default:null},content:{type:String,default:""},contentWarning:{type:String,default:""},loading:{type:Boolean,default:!1}}},nt={class:"mt-4 p-4 rounded-lg border shadow-sm animate-fade-in-down ap-reply-card"},lt={class:"flex flex-col gap-3"},rt={class:"flex items-center gap-2"},st=["value"],it=["value"],at={class:"mb-3"},dt=["value"],ct={class:"min-h-[150px]"},mt={class:"flex justify-end gap-2 mt-3"},pt=["disabled"];function gt(n,t,o,c,l,s){const i=e.resolveComponent("markdown-fieldtype");return e.openBlock(),e.createElementBlock("div",nt,[e.createElementVNode("div",lt,[e.createElementVNode("div",rt,[t[7]||(t[7]=e.createElementVNode("label",{class:"text-xs text-gray-500 uppercase font-bold"},"Reply As:",-1)),e.createElementVNode("select",{value:o.actorId,onInput:t[0]||(t[0]=r=>n.$emit("update:actorId",r.target.value)),class:"text-sm rounded-md shadow-sm ap-reply-input"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.actors,r=>(e.openBlock(),e.createElementBlock("option",{key:r.id,value:r.id},e.toDisplayString(r.name)+" ("+e.toDisplayString(r.handle)+")",9,it))),128))],40,st)]),e.createElementVNode("div",at,[e.createElementVNode("input",{type:"text",value:o.contentWarning,onInput:t[1]||(t[1]=r=>n.$emit("update:contentWarning",r.target.value)),placeholder:"Content Warning (optional)",class:"input-text w-full text-sm"},null,40,dt)]),e.createElementVNode("div",ct,[e.createVNode(i,{value:o.content,"model-value":o.content,config:{cheatsheet:!0,container:"assets",buttons:["bold","italic","unorderedlist","orderedlist","quote","link","image","table"],toolbar_mode:"fixed"},onInput:t[2]||(t[2]=r=>n.$emit("update:content",r)),"onUpdate:modelValue":t[3]||(t[3]=r=>n.$emit("update:content",r)),"onUpdate:value":t[4]||(t[4]=r=>n.$emit("update:content",r))},null,8,["value","model-value"])]),e.createElementVNode("div",mt,[e.createElementVNode("button",{type:"button",onClick:t[5]||(t[5]=r=>n.$emit("cancel")),class:"relative inline-flex items-center justify-center whitespace-nowrap shrink-0 font-medium antialiased cursor-pointer no-underline disabled:[&_svg]:opacity-30 disabled:cursor-not-allowed [&_svg]:shrink-0 dark:[&_svg]:text-white bg-white hover:bg-gray-50 text-gray-800 border border-gray-300 shadow-sm px-4 h-10 text-sm rounded-lg dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-700"},"Cancel"),e.createElementVNode("button",{type:"button",onClick:t[6]||(t[6]=r=>n.$emit("submit")),class:"relative inline-flex items-center justify-center whitespace-nowrap shrink-0 font-medium antialiased cursor-pointer no-underline disabled:[&_svg]:opacity-30 disabled:cursor-not-allowed [&_svg]:shrink-0 dark:[&_svg]:text-white bg-linear-to-b from-primary/90 to-primary hover:bg-primary-hover text-white disabled:opacity-60 disabled:text-white dark:disabled:text-white border border-primary-border shadow-ui-md inset-shadow-2xs inset-shadow-white/25 disabled:inset-shadow-none dark:disabled:inset-shadow-none [&_svg]:text-white [&_svg]:opacity-60 px-4 h-10 text-sm gap-2 rounded-lg",disabled:o.loading},e.toDisplayString(o.loading?"Sending...":"Reply"),9,pt)])])])}const y=p(ot,[["render",gt]]),ht={components:{InboxStack:b,InboxNote:k,InboxReplyForm:y},props:{open:{type:Boolean,required:!0},noteId:{type:[String,Number],default:null},apiUrl:{type:String,required:!0},activeReplyId:{type:[String,Number],default:null},replyForm:{type:Object,required:!0},sendingReply:{type:Boolean,default:!1},actors:{type:Array,default:()=>[]},permissions:{type:Object,default:()=>({update:!1,delete:!1})}},emits:["close","update:activeReplyId","update:replyForm","submit-reply","reply","boost","like","history","thread","json","lightbox","delete","edit"],data(){return{loading:!1,items:[]}},watch:{open(n){n&&this.noteId&&this.fetchThread()},noteId(n){this.open&&n&&this.fetchThread()}},methods:{fetchThread(){this.loading=!0,this.items=[],fetch(`${this.apiUrl}/thread/${this.noteId}`).then(n=>n.json()).then(n=>{this.items=n}).finally(()=>{this.loading=!1})}}},bt={key:0,class:"py-8 text-center text-gray-500"},kt={key:1,class:"py-8 text-center text-gray-500"},ft={key:2,class:"flex flex-col"};function yt(n,t,o,c,l,s){const i=e.resolveComponent("inbox-reply-form"),r=e.resolveComponent("inbox-note"),d=e.resolveComponent("inbox-stack");return e.openBlock(),e.createBlock(d,{open:o.open,onClosed:t[5]||(t[5]=a=>n.$emit("close")),title:"Thread",inset:""},{default:e.withCtx(()=>[l.loading?(e.openBlock(),e.createElementBlock("div",bt," Loading thread... ")):l.items.length===0?(e.openBlock(),e.createElementBlock("div",kt," Thread is empty. ")):(e.openBlock(),e.createElementBlock("div",ft,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.items,(a,g)=>(e.openBlock(),e.createElementBlock("div",{key:a.id||g,class:e.normalizeClass(["relative",{"bg-blue-50 dark:bg-dark-800":a.is_focus}])},[a.depth>0?(e.openBlock(),e.createElementBlock("div",{key:0,class:"absolute left-6 top-0 bottom-0 border-l-2 border-gray-200 dark:border-gray-700",style:e.normalizeStyle({left:a.depth*1.5+"rem"})},null,4)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"p-4 border-b dark:border-dark-800",style:e.normalizeStyle({"margin-left":a.depth*1.5+"rem"})},[e.createVNode(r,{note:a,permissions:o.permissions,onReply:m=>n.$emit("reply",a),onBoost:m=>n.$emit("boost",a),onLike:m=>n.$emit("like",a),onHistory:m=>n.$emit("history",a),onThread:m=>n.$emit("thread",a),onJson:m=>n.$emit("json",a),onLightbox:t[4]||(t[4]=m=>n.$emit("lightbox",{attachments:m.attachments,index:m.index})),onDelete:m=>n.$emit("delete",a),onEdit:m=>n.$emit("edit",a)},{"reply-editor":e.withCtx(()=>[o.activeReplyId===a.id?(e.openBlock(),e.createBlock(i,{key:0,actors:o.actors,"actor-id":o.replyForm.actor_id,content:o.replyForm.content,"content-warning":o.replyForm.content_warning,loading:o.sendingReply,"onUpdate:actorId":t[0]||(t[0]=m=>n.$emit("update:replyForm",{...o.replyForm,actor_id:m})),"onUpdate:content":t[1]||(t[1]=m=>n.$emit("update:replyForm",{...o.replyForm,content:m})),"onUpdate:contentWarning":t[2]||(t[2]=m=>n.$emit("update:replyForm",{...o.replyForm,content_warning:m})),onCancel:t[3]||(t[3]=m=>n.$emit("update:activeReplyId",null)),onSubmit:m=>n.$emit("submit-reply",a)},null,8,["actors","actor-id","content","content-warning","loading","onSubmit"])):e.createCommentVNode("",!0)]),_:2},1032,["note","permissions","onReply","onBoost","onLike","onHistory","onThread","onJson","onDelete","onEdit"])],4)],2))),128))]))]),_:1},8,["open"])}const xt=p(ht,[["render",yt]]),wt={props:{currentFilter:{type:String,default:"all"},canCreateNote:{type:Boolean,default:!1},showNewDropdown:{type:Boolean,default:!1}}},ut={class:"flex rounded-lg p-1 gap-1 border ap-filter-container items-center"},_t=["onClick"],Nt={key:0,class:"btn-group relative flex items-center ml-2"},Vt={key:0,class:"absolute right-0 w-48 mt-2 origin-top-right border divide-y rounded-md shadow-lg outline-none z-50 py-1 ap-dropdown-menu",style:{top:"2.75em","text-align":"left"}};function Et(n,t,o,c,l,s){return e.openBlock(),e.createElementBlock("div",ut,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(["all","activities","mentions"],i=>e.createElementVNode("button",{key:i,onClick:r=>n.$emit("filter-change",i),class:e.normalizeClass(["px-3 py-1 rounded-md text-sm font-medium transition-colors capitalize ap-filter-btn",o.currentFilter===i?"active":"inactive"])},e.toDisplayString(i),11,_t)),64)),o.canCreateNote?(e.openBlock(),e.createElementBlock("div",Nt,[e.createElementVNode("button",{type:"button",onClick:t[0]||(t[0]=i=>n.$emit("create-note")),class:"relative inline-flex items-center justify-center whitespace-nowrap shrink-0 font-medium antialiased cursor-pointer no-underline disabled:[&_svg]:opacity-30 disabled:cursor-not-allowed [&_svg]:shrink-0 dark:[&_svg]:text-white bg-linear-to-b from-primary/90 to-primary hover:bg-primary-hover text-white disabled:opacity-60 disabled:text-white dark:disabled:text-white border border-primary-border shadow-ui-md inset-shadow-2xs inset-shadow-white/25 disabled:inset-shadow-none dark:disabled:inset-shadow-none [&_svg]:text-white [&_svg]:opacity-60 h-10 text-sm gap-2 rounded-r-none pr-3 pl-4 focus:z-10 ap-new-note-btn"}," New Note "),e.createElementVNode("button",{type:"button",onClick:t[1]||(t[1]=i=>n.$emit("toggle-dropdown")),class:"relative inline-flex items-center justify-center whitespace-nowrap shrink-0 font-medium antialiased cursor-pointer no-underline disabled:[&_svg]:opacity-30 disabled:cursor-not-allowed [&_svg]:shrink-0 dark:[&_svg]:text-white bg-linear-to-b from-primary/90 to-primary hover:bg-primary-hover text-white disabled:opacity-60 disabled:text-white dark:disabled:text-white border border-primary-border shadow-ui-md inset-shadow-2xs inset-shadow-white/25 disabled:inset-shadow-none dark:disabled:inset-shadow-none [&_svg]:text-white [&_svg]:opacity-60 h-10 text-sm gap-2 rounded-r-lg rounded-l-none px-2 border-l border-primary-border/20 -ml-px flex items-center focus:z-10"},[...t[3]||(t[3]=[e.createElementVNode("svg",{class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20"},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])]),o.showNewDropdown?(e.openBlock(),e.createElementBlock("div",Vt,[e.createElementVNode("a",{href:"#",onClick:t[2]||(t[2]=e.withModifiers(i=>n.$emit("create-poll"),["prevent"])),class:"block px-4 py-2 text-sm ap-dropdown-item"},"New Poll")])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])}const Bt={components:{InboxFilterBar:p(wt,[["render",Et]])},props:{currentFilter:{type:String,default:"all"},canCreateNote:{type:Boolean,default:!1},showNewDropdown:{type:Boolean,default:!1}}},Ct={class:"flex flex-wrap items-center justify-between gap-4 px-2 sm:px-0 py-6 max-md:pb-8 md:py-8"};function St(n,t,o,c,l,s){const i=e.resolveComponent("inbox-filter-bar");return e.openBlock(),e.createElementBlock("header",Ct,[t[4]||(t[4]=e.createElementVNode("h1",{class:"text-[25px] leading-[1.25] st-text-legibility font-medium antialiased flex items-center gap-2.5 md:flex-1"},"Inbox",-1)),e.createVNode(i,{"current-filter":o.currentFilter,"can-create-note":o.canCreateNote,"show-new-dropdown":o.showNewDropdown,onFilterChange:t[0]||(t[0]=r=>n.$emit("filter-change",r)),onCreateNote:t[1]||(t[1]=r=>n.$emit("create-note")),onToggleDropdown:t[2]||(t[2]=r=>n.$emit("toggle-dropdown")),onCreatePoll:t[3]||(t[3]=r=>n.$emit("create-poll"))},null,8,["current-filter","can-create-note","show-new-dropdown"])])}const jt=p(Bt,[["render",St]]),Dt={components:{InboxNote:k,InboxReplyForm:y},props:{notes:{type:Array,required:!0},loading:{type:Boolean,default:!1},pagination:{type:Object,required:!0},permissions:{type:Object,default:()=>({update:!1,delete:!1})},actors:{type:Array,default:()=>[]},activeReplyId:{type:[String,Number],default:null},replyForm:{type:Object,default:()=>({actor_id:null,content:"",content_warning:""})},sendingReply:{type:Boolean,default:!1}},computed:{paginationRange(){const n=[],o=this.pagination.page-2,c=this.pagination.page+2+1;for(let i=1;i<=this.pagination.lastPage;i++)(i===1||i===this.pagination.lastPage||i>=o&&i<c)&&n.push(i);const l=[];let s;for(let i of n)s&&(i-s===2?l.push(s+1):i-s!==1&&l.push("...")),l.push(i),s=i;return l}}},$t={class:"card p-0"},Ft={class:"flex flex-col"},Mt={key:0,class:"py-8 text-center text-gray-400"},Ut={class:"flex flex-col divide-y"},Tt={key:1,class:"py-6 px-4 sm:px-6 flex items-center justify-between"},Lt={class:"text-sm text-gray-500"},Pt={class:"flex gap-1 items-center"},At=["value"],It=["disabled"],Ht=["onClick","disabled"],zt=["disabled"],Rt={key:2,class:"py-12 text-center text-gray-500"};function qt(n,t,o,c,l,s){const i=e.resolveComponent("inbox-reply-form"),r=e.resolveComponent("inbox-note");return e.openBlock(),e.createElementBlock("div",$t,[e.createElementVNode("div",Ft,[!o.loading&&o.notes.length===0?(e.openBlock(),e.createElementBlock("div",Mt," Inbox is empty. ")):e.createCommentVNode("",!0),e.createElementVNode("div",Ut,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.notes,d=>(e.openBlock(),e.createBlock(r,{key:d.id,note:d,permissions:o.permissions,onReply:t[4]||(t[4]=a=>n.$emit("reply",a)),onBoost:t[5]||(t[5]=a=>n.$emit("boost",a)),onQuote:t[6]||(t[6]=a=>n.$emit("quote",a)),onLike:t[7]||(t[7]=a=>n.$emit("like",a)),onHistory:t[8]||(t[8]=a=>n.$emit("history",a)),onThread:t[9]||(t[9]=a=>n.$emit("thread",a)),onJson:t[10]||(t[10]=a=>n.$emit("json",a)),onLightbox:t[11]||(t[11]=a=>n.$emit("lightbox",a)),onDelete:t[12]||(t[12]=a=>n.$emit("delete",a)),onEdit:t[13]||(t[13]=a=>n.$emit("edit",a)),onVote:t[14]||(t[14]=a=>n.$emit("vote",a))},{"reply-editor":e.withCtx(()=>[o.activeReplyId===d.id?(e.openBlock(),e.createBlock(i,{key:0,actors:o.actors,"actor-id":o.replyForm.actor_id,content:o.replyForm.content,"content-warning":o.replyForm.content_warning,loading:o.sendingReply,"onUpdate:actorId":t[0]||(t[0]=a=>n.$emit("update:replyForm",{...o.replyForm,actor_id:a})),"onUpdate:content":t[1]||(t[1]=a=>n.$emit("update:replyForm",{...o.replyForm,content:a})),"onUpdate:contentWarning":t[2]||(t[2]=a=>n.$emit("update:replyForm",{...o.replyForm,content_warning:a})),onCancel:t[3]||(t[3]=a=>n.$emit("update:activeReplyId",null)),onSubmit:a=>n.$emit("submit-reply",d)},null,8,["actors","actor-id","content","content-warning","loading","onSubmit"])):e.createCommentVNode("",!0)]),_:2},1032,["note","permissions"]))),128))]),o.pagination.total>0?(e.openBlock(),e.createElementBlock("div",Tt,[e.createElementVNode("div",Lt," Showing "+e.toDisplayString((o.pagination.page-1)*o.pagination.perPage+1)+" to "+e.toDisplayString(Math.min(o.pagination.page*o.pagination.perPage,o.pagination.total))+" of "+e.toDisplayString(o.pagination.total)+" entries ",1),e.createElementVNode("div",Pt,[e.createElementVNode("select",{value:o.pagination.perPage,onChange:t[15]||(t[15]=d=>n.$emit("per-page-change",parseInt(d.target.value))),class:"btn btn-sm pr-8 mr-2"},[...t[18]||(t[18]=[e.createElementVNode("option",{value:25},"25 / page",-1),e.createElementVNode("option",{value:50},"50 / page",-1),e.createElementVNode("option",{value:100},"100 / page",-1)])],40,At),e.createElementVNode("button",{class:"btn btn-sm",disabled:o.pagination.page<=1||o.loading,onClick:t[16]||(t[16]=d=>n.$emit("page-change",o.pagination.page-1))},"←",8,It),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.paginationRange,(d,a)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[d==="..."?(e.openBlock(),e.createElementBlock("span",{key:"dots"+a,class:"px-2 py-1 text-gray-400"},"...")):(e.openBlock(),e.createElementBlock("button",{key:d,onClick:g=>n.$emit("page-change",d),class:e.normalizeClass(["btn btn-sm",{"bg-blue-600 border-blue-600 font-bold":d===o.pagination.page}]),disabled:o.loading},e.toDisplayString(d),11,Ht))],64))),256)),e.createElementVNode("button",{class:"btn btn-sm",disabled:o.pagination.page>=o.pagination.lastPage||o.loading,onClick:t[17]||(t[17]=d=>n.$emit("page-change",o.pagination.page+1))},"→",8,zt)])])):e.createCommentVNode("",!0),o.loading?(e.openBlock(),e.createElementBlock("div",Rt,[...t[19]||(t[19]=[e.createElementVNode("svg",{class:"animate-spin h-8 w-8 mx-auto text-gray-400 mb-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e.createElementVNode("span",null,"Loading...",-1)])])):e.createCommentVNode("",!0)])])}const Ot=p(Dt,[["render",qt]]),Jt={components:{InboxStack:b},props:{open:{type:Boolean,required:!0},form:{type:Object,required:!0},actors:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},previewUrl:{type:String,default:null}}},Qt={class:"mb-5"},Wt=["disabled"],Zt=["value"],Kt={class:"mb-5 flex flex-col"},Gt={class:"mb-3"},Xt={class:"min-h-[200px]"},Yt=["disabled"];function vt(n,t,o,c,l,s){const i=e.resolveComponent("markdown-fieldtype"),r=e.resolveComponent("inbox-stack");return e.openBlock(),e.createBlock(r,{open:o.open,onClosed:t[7]||(t[7]=d=>n.$emit("close")),title:o.isEditing?"Edit Note":"Create Note"},{"footer-end":e.withCtx(()=>[e.createElementVNode("button",{class:"relative inline-flex items-center justify-center whitespace-nowrap shrink-0 font-medium antialiased cursor-pointer no-underline disabled:[&_svg]:opacity-30 disabled:cursor-not-allowed [&_svg]:shrink-0 dark:[&_svg]:text-white bg-white hover:bg-gray-50 text-gray-800 border border-gray-300 shadow-sm px-4 h-10 text-sm rounded-lg dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-700",onClick:t[5]||(t[5]=d=>n.$emit("close"))},"Cancel"),e.createElementVNode("button",{class:"relative inline-flex items-center justify-center whitespace-nowrap shrink-0 font-medium antialiased cursor-pointer no-underline disabled:[&_svg]:opacity-30 disabled:cursor-not-allowed [&_svg]:shrink-0 dark:[&_svg]:text-white bg-linear-to-b from-primary/90 to-primary hover:bg-primary-hover text-white disabled:opacity-60 disabled:text-white dark:disabled:text-white border border-primary-border shadow-ui-md inset-shadow-2xs inset-shadow-white/25 disabled:inset-shadow-none dark:disabled:inset-shadow-none [&_svg]:text-white [&_svg]:opacity-60 px-4 h-10 text-sm gap-2 rounded-lg",onClick:t[6]||(t[6]=d=>n.$emit("submit")),disabled:o.loading},e.toDisplayString(o.loading?"Saving...":o.isEditing?"Update":"Create"),9,Yt)]),default:e.withCtx(()=>[e.createElementVNode("div",Qt,[t[8]||(t[8]=e.createElementVNode("label",{class:"block text-sm font-bold mb-2"},"Post As",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.form.actor=d),class:"input-text w-full",disabled:o.isEditing},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.actors,d=>(e.openBlock(),e.createElementBlock("option",{key:d.id,value:d.id},e.toDisplayString(d.name)+" ("+e.toDisplayString(d.handle)+")",9,Zt))),128))],8,Wt),[[e.vModelSelect,o.form.actor]])]),e.createElementVNode("div",Kt,[t[9]||(t[9]=e.createElementVNode("label",{class:"block text-sm font-bold mb-2"},"Content",-1)),e.createElementVNode("div",Gt,[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=d=>o.form.content_warning=d),placeholder:"Content Warning (optional)",class:"input-text w-full"},null,512),[[e.vModelText,o.form.content_warning]])]),e.createElementVNode("div",Xt,[e.createVNode(i,{value:o.form.content,"model-value":o.form.content,config:{cheatsheet:!0,container:"assets",buttons:["bold","italic","unorderedlist","orderedlist","quote","link","image","table"],type:"markdown",toolbar_mode:"fixed"},meta:{previewUrl:o.previewUrl},onInput:t[2]||(t[2]=d=>o.form.content=d),"onUpdate:modelValue":t[3]||(t[3]=d=>o.form.content=d),"onUpdate:value":t[4]||(t[4]=d=>o.form.content=d)},null,8,["value","model-value","meta"])])])]),_:1},8,["open","title"])}const eo=p(Jt,[["render",vt]]),to={components:{InboxStack:b},props:{open:{type:Boolean,required:!0},form:{type:Object,required:!0},actors:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},methods:{addOption(){this.form.options.push("")},removeOption(n){this.form.options.splice(n,1)}}},oo={class:"mb-5"},no=["value"],lo={class:"mb-5"},ro={class:"mb-5"},so={class:"flex items-center space-x-2 cursor-pointer"},io={class:"mb-5"},ao={class:"space-y-2"},co=["onUpdate:modelValue"],mo=["onClick"],po=["disabled"];function go(n,t,o,c,l,s){const i=e.resolveComponent("inbox-stack");return e.openBlock(),e.createBlock(i,{open:o.open,onClosed:t[6]||(t[6]=r=>n.$emit("close")),title:"Create Poll"},{"footer-end":e.withCtx(()=>[e.createElementVNode("button",{class:"relative inline-flex items-center justify-center whitespace-nowrap shrink-0 font-medium antialiased cursor-pointer no-underline disabled:[&_svg]:opacity-30 disabled:cursor-not-allowed [&_svg]:shrink-0 dark:[&_svg]:text-white bg-white hover:bg-gray-50 text-gray-800 border border-gray-300 shadow-sm px-4 h-10 text-sm rounded-lg dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-700",onClick:t[4]||(t[4]=r=>n.$emit("close"))},"Cancel"),e.createElementVNode("button",{class:"relative inline-flex items-center justify-center whitespace-nowrap shrink-0 font-medium antialiased cursor-pointer no-underline disabled:[&_svg]:opacity-30 disabled:cursor-not-allowed [&_svg]:shrink-0 dark:[&_svg]:text-white bg-linear-to-b from-primary/90 to-primary hover:bg-primary-hover text-white disabled:opacity-60 disabled:text-white dark:disabled:text-white border border-primary-border shadow-ui-md inset-shadow-2xs inset-shadow-white/25 disabled:inset-shadow-none dark:disabled:inset-shadow-none [&_svg]:text-white [&_svg]:opacity-60 px-4 h-10 text-sm gap-2 rounded-lg",onClick:t[5]||(t[5]=r=>n.$emit("submit")),disabled:o.loading},e.toDisplayString(o.loading?"Creating...":"Create Poll"),9,po)]),default:e.withCtx(()=>[e.createElementVNode("div",oo,[t[7]||(t[7]=e.createElementVNode("label",{class:"block text-sm font-bold mb-2"},"Post As",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.form.actor=r),class:"input-text w-full"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.actors,r=>(e.openBlock(),e.createElementBlock("option",{key:r.id,value:r.id},e.toDisplayString(r.name)+" ("+e.toDisplayString(r.handle)+")",9,no))),128))],512),[[e.vModelSelect,o.form.actor]])]),e.createElementVNode("div",lo,[t[8]||(t[8]=e.createElementVNode("label",{class:"block text-sm font-bold mb-2"},"Question",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[1]||(t[1]=r=>o.form.content=r),class:"input-text w-full",rows:"3",placeholder:"Ask a question..."},null,512),[[e.vModelText,o.form.content]])]),e.createElementVNode("div",ro,[e.createElementVNode("label",so,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=r=>o.form.multiple_choice=r),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[e.vModelCheckbox,o.form.multiple_choice]]),t[9]||(t[9]=e.createElementVNode("span",{class:"text-sm font-bold"},"Allow Multiple Choices (Checkboxes)",-1))])]),e.createElementVNode("div",io,[t[10]||(t[10]=e.createElementVNode("label",{class:"block text-sm font-bold mb-2"},"Options",-1)),t[11]||(t[11]=e.createElementVNode("div",{class:"text-xs text-gray-500 mb-2"},"Leave options empty for an open-ended question.",-1)),e.createElementVNode("div",ao,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.form.options,(r,d)=>(e.openBlock(),e.createElementBlock("div",{key:d,class:"flex items-center gap-2"},[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":a=>o.form.options[d]=a,class:"input-text w-full text-sm",placeholder:"Option text"},null,8,co),[[e.vModelText,o.form.options[d]]]),o.form.options.length>2?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:a=>s.removeOption(d),class:"text-red-500 hover:text-red-700"},"×",8,mo)):e.createCommentVNode("",!0)]))),128))]),e.createElementVNode("button",{onClick:t[3]||(t[3]=(...r)=>s.addOption&&s.addOption(...r)),class:"mt-2 text-sm text-blue-600 hover:text-blue-800"},"+ Add Option")])]),_:1},8,["open"])}const ho=p(to,[["render",go]]),bo={components:{InboxStack:b,InboxNote:k},props:{open:{type:Boolean,required:!0},form:{type:Object,required:!0},actors:{type:Array,default:()=>[]},quotedNote:{type:Object,default:null},loading:{type:Boolean,default:!1}}},ko={class:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},fo={class:"mb-5"},yo=["value"],xo={class:"mb-5"},wo={class:"mb-5"},uo=["disabled"];function _o(n,t,o,c,l,s){const i=e.resolveComponent("inbox-note"),r=e.resolveComponent("markdown-fieldtype"),d=e.resolveComponent("inbox-stack");return e.openBlock(),e.createBlock(d,{open:o.open,onClosed:t[7]||(t[7]=a=>n.$emit("close")),title:"Quote Post"},{"footer-end":e.withCtx(()=>[e.createElementVNode("button",{class:"relative inline-flex items-center justify-center whitespace-nowrap shrink-0 font-medium antialiased cursor-pointer no-underline disabled:[&_svg]:opacity-30 disabled:cursor-not-allowed [&_svg]:shrink-0 dark:[&_svg]:text-white bg-white hover:bg-gray-50 text-gray-800 border border-gray-300 shadow-sm px-4 h-10 text-sm rounded-lg dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-700",onClick:t[5]||(t[5]=a=>n.$emit("close"))},"Cancel"),e.createElementVNode("button",{class:"relative inline-flex items-center justify-center whitespace-nowrap shrink-0 font-medium antialiased cursor-pointer no-underline disabled:[&_svg]:opacity-30 disabled:cursor-not-allowed [&_svg]:shrink-0 dark:[&_svg]:text-white bg-linear-to-b from-primary/90 to-primary hover:bg-primary-hover text-white disabled:opacity-60 disabled:text-white dark:disabled:text-white border border-primary-border shadow-ui-md inset-shadow-2xs inset-shadow-white/25 disabled:inset-shadow-none dark:disabled:inset-shadow-none [&_svg]:text-white [&_svg]:opacity-60 px-4 h-10 text-sm gap-2 rounded-lg",onClick:t[6]||(t[6]=a=>n.$emit("submit")),disabled:o.loading},e.toDisplayString(o.loading?"Posting...":"Quote"),9,uo)]),default:e.withCtx(()=>[e.createElementVNode("div",ko,[t[8]||(t[8]=e.createElementVNode("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-2"},"Quoting:",-1)),o.quotedNote?(e.openBlock(),e.createBlock(i,{key:0,note:o.quotedNote,permissions:{update:!1,delete:!1},onReply:()=>{},onBoost:()=>{},onQuote:()=>{},onLike:()=>{}},null,8,["note"])):e.createCommentVNode("",!0)]),e.createElementVNode("div",fo,[t[9]||(t[9]=e.createElementVNode("label",{class:"block text-sm font-bold mb-2"},"Post As",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>o.form.actor=a),class:"input-text w-full"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.actors,a=>(e.openBlock(),e.createElementBlock("option",{key:a.id,value:a.id},e.toDisplayString(a.name)+" ("+e.toDisplayString(a.handle)+") ",9,yo))),128))],512),[[e.vModelSelect,o.form.actor]])]),e.createElementVNode("div",xo,[t[10]||(t[10]=e.createElementVNode("label",{class:"block text-sm font-bold mb-2"},"Content Warning (Optional)",-1)),e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=a=>o.form.content_warning=a),class:"input-text w-full",placeholder:"Content Warning (optional)"},null,512),[[e.vModelText,o.form.content_warning]])]),e.createElementVNode("div",wo,[t[11]||(t[11]=e.createElementVNode("label",{class:"block text-sm font-bold mb-2"},"Your Commentary",-1)),e.createVNode(r,{value:o.form.content,"model-value":o.form.content,config:{cheatsheet:!0,container:"assets",buttons:["bold","italic","unorderedlist","orderedlist","quote","link","image","table"],type:"markdown",toolbar_mode:"fixed"},onInput:t[2]||(t[2]=a=>o.form.content=a),"onUpdate:modelValue":t[3]||(t[3]=a=>o.form.content=a),"onUpdate:value":t[4]||(t[4]=a=>o.form.content=a)},null,8,["value","model-value"])])]),_:1},8,["open"])}const No={components:{InboxNote:k,InboxStack:b,InboxJsonStack:Le,InboxHistoryStack:tt,InboxThreadStack:xt,InboxTitle:jt,InboxFeed:Ot,InboxNoteForm:eo,InboxPollForm:ho,InboxQuoteForm:p(bo,[["render",_o]]),InboxReplyForm:y},props:{initialActors:{type:Array,default:()=>[]},apiUrl:{type:String,required:!0},replyUrl:{type:String,required:!0},likeUrl:{type:String,required:!0},unlikeUrl:{type:String,required:!0},announceUrl:{type:String,required:!0},undoAnnounceUrl:{type:String,required:!0},createNoteUrl:{type:String,default:null},storeNoteUrl:{type:String,default:null},storePollUrl:{type:String,default:null},deleteUrl:{type:String,default:null},updateNoteUrl:{type:String,default:null},linkPreviewUrl:{type:String,default:null},markdownPreviewUrl:{type:String,default:null},batchLinkPreviewUrl:{type:String,default:null}},data(){return{notes:[],page:1,lastPage:1,total:0,perPage:parseInt(localStorage.getItem("activitypub_per_page"))||25,loading:!1,filter:"all",error:null,localActors:this.initialActors,activeReplyId:null,replyForm:{content:"",content_warning:"",actor_id:this.initialActors[0]?.id||null},sendingReply:!1,lightbox:{open:!1,images:[],index:0},jsonModal:{open:!1,content:""},isCreatingNote:!1,newNote:{content:"",content_warning:"",actor:null},isCreatingPoll:!1,newPoll:{actor:null,content:"",multiple_choice:!1,options:["",""]},isCreatingQuote:!1,quotedNote:null,newQuote:{actor:null,content:"",content_warning:"",quote_of:null},showNewDropdown:!1,creating:!1,editingNoteId:null,isViewingHistory:!1,historyNote:null,isViewingThread:!1,threadNote:null}},mounted(){document.title="Inbox ‹ ActivityPub ‹ Statamic",this.loadNotes()},methods:{updateReplyForm(n){this.replyForm=n},loadNotes(){this.loading||(this.loading=!0,this.error=null,this.$axios.get(this.apiUrl,{params:{page:this.page,per_page:this.perPage,filter:this.filter}}).then(n=>{const t=n.data,o=t.data.map(l=>({...l,showContent:!l.sensitive})).sort((l,s)=>{const i=new Date(l.date).getTime(),r=new Date(s.date).getTime();return i!==r?r-i:l.id<s.id?1:l.id>s.id?-1:0});this.notes=o,this.total=t.meta.total,this.lastPage=t.meta.last_page;const c=o.filter(l=>l.needs_preview&&!l.link_preview&&!l.oembed).map(l=>l.id);c.length>0&&this.batchLinkPreviewUrl&&this.fetchBatchPreviews(c)}).catch(n=>{this.error=n.response&&n.response.data.message?n.response.data.message:n.message||"Unknown error"}).finally(()=>{this.loading=!1}))},fetchBatchPreviews(n){this.$axios.post(this.batchLinkPreviewUrl,{note_ids:n}).then(t=>{const o=t.data;this.notes=this.notes.map(c=>o[c.id]?{...c,link_preview:o[c.id]}:c)}).catch(console.error)},changePage(n){n<1||n>this.lastPage||(this.page=n,this.loadNotes(),this.$nextTick(()=>window.scrollTo({top:0,behavior:"smooth"})))},changePerPage(n){this.perPage=n,this.page=1,localStorage.setItem("activitypub_per_page",n),this.loadNotes(),this.$nextTick(()=>window.scrollTo({top:0,behavior:"smooth"}))},setFilter(n){this.filter=n,this.page=1,this.loadNotes()},retry(){this.loadNotes()},toggleNewDropdown(){this.showNewDropdown=!this.showNewDropdown},createNote(){this.isCreatingNote=!0,this.editingNoteId=null,this.newNote={content:"",content_warning:"",actor:this.localActors[0]?.id||null}},editNote(n){this.isCreatingNote=!0,this.editingNoteId=n.id,this.newNote={content:n.content_raw||n.content,content_warning:n.summary||"",actor:n.actor.id}},closeNoteModal(){this.isCreatingNote=!1,this.editingNoteId=null},submitNote(){if(this.creating)return;const n=this.editingNoteId?this.updateNoteUrl.replace("ID",this.editingNoteId):this.storeNoteUrl,t=this.editingNoteId?"PUT":"POST";this.newNote.content.trim()&&(this.creating=!0,this.creating=!0,this.$axios[t.toLowerCase()](n,this.newNote).then(()=>{this.closeNoteModal(),this.loadNotes()}).catch(o=>{const c=o.response&&o.response.data.message?o.response.data.message:o.message;alert(c)}).finally(()=>{this.creating=!1}))},createPollAndClose(){this.showNewDropdown=!1,this.isCreatingPoll=!0,this.newPoll={actor:this.localActors[0]?.id||null,content:"",multiple_choice:!1,options:["",""]}},closePollModal(){this.isCreatingPoll=!1},addOption(){this.newPoll.options.push("")},removeOption(n){this.newPoll.options.splice(n,1)},submitPoll(){if(this.creating||!this.newPoll.content.trim())return;const n=this.newPoll.options.filter(t=>t.trim());if(n.length<2&&n.length>0){alert("A poll needs at least 2 options, or none for open-ended.");return}this.creating=!0,this.creating=!0,this.$axios.post(this.storePollUrl,{actor:this.newPoll.actor,content:this.newPoll.content,options:n,multiple_choice:this.newPoll.multiple_choice}).then(()=>{this.closePollModal(),this.loadNotes()}).catch(t=>{const o=t.response&&t.response.data.message?t.response.data.message:t.message;alert(o)}).finally(()=>this.creating=!1)},toggleReply(n){this.activeReplyId===n.id?this.activeReplyId=null:(this.activeReplyId=n.id,this.replyForm={content:"",content_warning:"",actor_id:this.localActors[0]?.id||null})},submitReply(n){this.sendingReply||this.replyForm.content.trim()&&(this.sendingReply=!0,this.sendingReply=!0,this.$axios.post(this.replyUrl,{in_reply_to:n.id,content:this.replyForm.content,content_warning:this.replyForm.content_warning,actor:this.replyForm.actor_id}).then(()=>{this.activeReplyId=null,this.loadNotes()}).catch(t=>{const o=t.response&&t.response.data.message?t.response.data.message:t.message;alert(o)}).finally(()=>this.sendingReply=!1))},openQuoteModal(n){this.quotedNote=n,this.isCreatingQuote=!0,this.newQuote={actor:this.localActors[0]?.id||null,content:"",content_warning:"",quote_of:n.id}},closeQuoteModal(){this.isCreatingQuote=!1,this.quotedNote=null},submitQuote(){this.creating||(this.creating=!0,this.creating=!0,this.$axios.post(this.storeNoteUrl,this.newQuote).then(()=>{this.closeQuoteModal(),this.loadNotes()}).catch(n=>{const t=n.response&&n.response.data.message?n.response.data.message:n.message;alert(t)}).finally(()=>this.creating=!1))},toggleBoost(n){const t=n.boosted_by_user,o=t?this.undoAnnounceUrl:this.announceUrl;this.$axios.post(o,{object:n.id,actor:this.localActors[0].id}).then(c=>{const l=c.data;n.boosted_by_user=!t,l.counts&&(n.counts=l.counts)})},toggleLike(n){const t=n.liked_by_user,o=t?this.unlikeUrl:this.likeUrl;this.$axios.post(o,{object:n.id,actor:this.localActors[0].id}).then(c=>{const l=c.data;n.liked_by_user=!t,l.counts?n.counts=l.counts:n.counts.likes=(n.counts.likes||0)+(t?-1:1)})},handleVote(n){const{note:t,option:o,callback:c}=n;this.$axios.post(this.storeNoteUrl+"/vote",{poll:t.id,choices:[o.name],actor:this.localActors[0].id}).then(l=>{c(!0)}).catch(()=>c(!1))},deleteItem(n){confirm("Are you sure you want to delete this note?")&&this.$axios.delete(this.deleteUrl,{data:{id:n.id}}).then(()=>{this.notes=this.notes.filter(t=>t.id!==n.id)})},openLightbox(n,t){this.lightbox.images=n,this.lightbox.index=t,this.lightbox.open=!0},closeLightbox(){this.lightbox.open=!1},lightboxNav(n){let t=this.lightbox.index+n;t<0&&(t=this.lightbox.images.length-1),t>=this.lightbox.images.length&&(t=0),this.lightbox.index=t},viewJson(n){this.jsonModal.content=n.activitypub_json||n,this.jsonModal.open=!0},closeJsonModal(){this.jsonModal.open=!1},viewHistory(n){this.isViewingHistory=!0,this.historyNote=n},closeHistoryModal(){this.isViewingHistory=!1,this.historyNote=null},viewThread(n){this.isViewingThread=!0,this.threadNote=n},closeThreadModal(){this.isViewingThread=!1,this.isViewingThread=!1,this.threadNote=null}}},Vo={class:"max-w-5xl mx-auto"},Eo={class:"@container/panel relative bg-gray-150 dark:bg-gray-950/35 dark:inset-shadow-2xs dark:inset-shadow-black w-full rounded-2xl mb-8 max-[600px]:p-1.25 p-1.75 [&:has(>[data-ui-panel-header])]:pt-0 focus-none starting-style-transition mb-6"},Bo={class:"h-auto visible transition-[height,visibility] duration-[250ms,2s]"},Co={class:"bg-white dark:bg-gray-850 rounded-xl ring ring-gray-200 dark:ring-x-0 dark:ring-b-0 dark:ring-gray-700/80 shadow-ui-md px-4 sm:px-4.5 py-5 space-y-2"},So=["src"],jo={class:"text-white mt-4"};function Do(n,t,o,c,l,s){const i=e.resolveComponent("inbox-title"),r=e.resolveComponent("inbox-feed"),d=e.resolveComponent("inbox-json-stack"),a=e.resolveComponent("inbox-note-form"),g=e.resolveComponent("inbox-poll-form"),m=e.resolveComponent("inbox-quote-form"),_=e.resolveComponent("inbox-history-stack"),Gr=e.resolveComponent("inbox-thread-stack");return e.openBlock(),e.createElementBlock("div",Vo,[e.createVNode(i,{"current-filter":l.filter,"can-create-note":!!o.createNoteUrl,"show-new-dropdown":l.showNewDropdown,onFilterChange:s.setFilter,onCreateNote:s.createNote,onToggleDropdown:s.toggleNewDropdown,onCreatePoll:s.createPollAndClose},null,8,["current-filter","can-create-note","show-new-dropdown","onFilterChange","onCreateNote","onToggleDropdown","onCreatePoll"]),e.createElementVNode("div",Eo,[e.createElementVNode("div",Bo,[e.createElementVNode("div",Co,[e.createVNode(r,{notes:l.notes,loading:l.loading,pagination:{page:l.page,lastPage:l.lastPage,total:l.total,perPage:l.perPage},permissions:{update:!!o.updateNoteUrl,delete:!!o.deleteUrl},actors:l.localActors,"active-reply-id":l.activeReplyId,"reply-form":l.replyForm,"sending-reply":l.sendingReply,onPageChange:s.changePage,onPerPageChange:s.changePerPage,"onUpdate:activeReplyId":t[0]||(t[0]=h=>l.activeReplyId=h),"onUpdate:replyForm":s.updateReplyForm,onSubmitReply:s.submitReply,onReply:s.toggleReply,onBoost:s.toggleBoost,onQuote:s.openQuoteModal,onLike:s.toggleLike,onHistory:s.viewHistory,onThread:s.viewThread,onJson:s.viewJson,onLightbox:t[1]||(t[1]=h=>s.openLightbox(h.attachments,h.index)),onDelete:s.deleteItem,onEdit:s.editNote,onVote:s.handleVote},null,8,["notes","loading","pagination","permissions","actors","active-reply-id","reply-form","sending-reply","onPageChange","onPerPageChange","onUpdate:replyForm","onSubmitReply","onReply","onBoost","onQuote","onLike","onHistory","onThread","onJson","onDelete","onEdit","onVote"])])])]),l.lightbox.open?(e.openBlock(),e.createElementBlock("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/90 flex flex-col items-center justify-center",onClick:t[5]||(t[5]=e.withModifiers((...h)=>s.closeLightbox&&s.closeLightbox(...h),["self"]))},[e.createElementVNode("button",{class:"absolute top-4 right-4 text-white text-3xl",onClick:t[2]||(t[2]=(...h)=>s.closeLightbox&&s.closeLightbox(...h))},"×"),e.createElementVNode("button",{class:"absolute left-8 text-white text-3xl p-4 bg-white/10 rounded-full hover:bg-white/20",onClick:t[3]||(t[3]=h=>s.lightboxNav(-1))},"‹"),e.createElementVNode("button",{class:"absolute right-8 text-white text-3xl p-4 bg-white/10 rounded-full hover:bg-white/20",onClick:t[4]||(t[4]=h=>s.lightboxNav(1))},"›"),e.createElementVNode("img",{src:l.lightbox.images[l.lightbox.index].url,class:"max-w-[90vw] max-h-[85vh] object-contain"},null,8,So),e.createElementVNode("div",jo,e.toDisplayString(l.lightbox.images[l.lightbox.index].description),1)])):e.createCommentVNode("",!0),e.createVNode(d,{open:l.jsonModal.open,content:l.jsonModal.content,onClose:s.closeJsonModal},null,8,["open","content","onClose"]),e.createVNode(a,{open:l.isCreatingNote,form:l.newNote,actors:l.localActors,"is-editing":!!l.editingNoteId,loading:l.creating,"preview-url":o.markdownPreviewUrl,onClose:s.closeNoteModal,onSubmit:s.submitNote},null,8,["open","form","actors","is-editing","loading","preview-url","onClose","onSubmit"]),e.createVNode(g,{open:l.isCreatingPoll,form:l.newPoll,actors:l.localActors,loading:l.creating,onClose:s.closePollModal,onSubmit:s.submitPoll},null,8,["open","form","actors","loading","onClose","onSubmit"]),e.createVNode(m,{open:l.isCreatingQuote,form:l.newQuote,actors:l.localActors,"quoted-note":l.quotedNote,loading:l.creating,onClose:s.closeQuoteModal,onSubmit:s.submitQuote},null,8,["open","form","actors","quoted-note","loading","onClose","onSubmit"]),e.createVNode(_,{open:l.isViewingHistory,"note-id":l.historyNote?l.historyNote.id:null,"api-url":o.apiUrl,onClose:s.closeHistoryModal,onViewJson:s.viewJson},null,8,["open","note-id","api-url","onClose","onViewJson"]),e.createVNode(Gr,{open:l.isViewingThread,"note-id":l.threadNote?l.threadNote.id:null,"api-url":o.apiUrl,"active-reply-id":l.activeReplyId,"reply-form":l.replyForm,"sending-reply":l.sendingReply,actors:l.localActors,permissions:{update:!!o.updateNoteUrl,delete:!!o.deleteUrl},onClose:s.closeThreadModal,"onUpdate:activeReplyId":t[6]||(t[6]=h=>l.activeReplyId=h),"onUpdate:replyForm":s.updateReplyForm,onSubmitReply:s.submitReply,onReply:s.toggleReply,onBoost:s.toggleBoost,onLike:s.toggleLike,onHistory:s.viewHistory,onThread:s.viewThread,onJson:s.viewJson,onLightbox:t[7]||(t[7]=h=>s.openLightbox(h.attachments,h.index)),onDelete:s.deleteItem,onEdit:s.editNote},null,8,["open","note-id","api-url","active-reply-id","reply-form","sending-reply","actors","permissions","onClose","onUpdate:replyForm","onSubmitReply","onReply","onBoost","onLike","onHistory","onThread","onJson","onDelete","onEdit"])])}const $o=p(No,[["render",Do]]),Fo={props:{activities:{type:Array,required:!0},pagination:{type:String,default:""}},data(){return{activityData:this.activities,drawer:{open:!1,visible:!1,uuid:"",content:""}}},methods:{showJson(n){const t=this.activityData.find(o=>o.id===n);!t||!t.json||(this.drawer.uuid=n,this.drawer.content=JSON.stringify(t.json,null,2),this.drawer.open=!0,document.body.style.overflow="hidden",setTimeout(()=>{this.drawer.visible=!0},10))},closeJson(){this.drawer.visible=!1,setTimeout(()=>{this.drawer.open=!1,document.body.style.overflow=""},300)}}},Mo={class:"card p-0 overflow-hidden"},Uo={class:"flex flex-col divide-y divide-gray-100 dark:divide-gray-800"},To={class:"flex-shrink-0 pt-1"},Lo=["src"],Po={key:1,class:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-400 font-bold text-sm"},Ao={class:"flex-1 min-w-0"},Io={class:"flex items-center justify-between"},Ho={class:"flex items-center gap-1 min-w-0"},zo={class:"font-bold text-gray-900 dark:text-gray-100 truncate text-sm"},Ro=["title"],qo={class:"text-gray-400 text-xs whitespace-nowrap"},Oo={class:"flex items-center gap-2 opacity-50 group-hover:opacity-100 transition-opacity"},Jo=["onClick"],Qo={class:"mt-1 flex items-start gap-2 text-sm text-gray-700 dark:text-gray-300"},Wo=["innerHTML"],Zo=["innerHTML"],Ko={class:"p-4 border-t border-gray-100 dark:border-gray-800 bg-gray-50 dark:bg-gray-900/50"},Go=["innerHTML"],Xo={class:"flex items-center justify-between px-6 py-4 border-b border-gray-100 dark:border-gray-800 shrink-0 bg-white dark:bg-gray-900"},Yo={class:"flex flex-col gap-1"},vo={class:"text-xs font-mono text-gray-500"},en={class:"flex-1 overflow-auto bg-gray-50 dark:bg-gray-950 p-6"},tn={class:"bg-white dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-800 overflow-hidden"},on={class:"p-4 text-xs font-mono leading-relaxed text-gray-800 dark:text-gray-200 overflow-x-auto"},nn={class:"language-json"},ln={class:"px-6 py-4 border-t border-gray-100 dark:border-gray-800 bg-gray-50 dark:bg-gray-900 shrink-0 flex justify-end"};function rn(n,t,o,c,l,s){return e.openBlock(),e.createElementBlock("div",Mo,[e.createElementVNode("div",Uo,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.activityData,i=>(e.openBlock(),e.createElementBlock("div",{key:i.id,class:"p-4 flex gap-4 hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors group"},[e.createElementVNode("div",To,[i.avatar?(e.openBlock(),e.createElementBlock("img",{key:0,src:i.avatar,class:"w-10 h-10 rounded-full object-cover bg-gray-200 dark:bg-gray-700"},null,8,Lo)):(e.openBlock(),e.createElementBlock("div",Po,e.toDisplayString(i.actorName.charAt(0)),1))]),e.createElementVNode("div",Ao,[e.createElementVNode("div",Io,[e.createElementVNode("div",Ho,[e.createElementVNode("span",zo,e.toDisplayString(i.actorName),1),e.createElementVNode("span",{class:"text-gray-500 text-sm truncate",title:i.actorHandle},e.toDisplayString(i.actorHandle),9,Ro),t[4]||(t[4]=e.createElementVNode("span",{class:"text-gray-400 text-xs"},"•",-1)),e.createElementVNode("span",qo,e.toDisplayString(i.date),1)]),e.createElementVNode("div",Oo,[e.createElementVNode("button",{type:"button",onClick:r=>s.showJson(i.id),class:"text-gray-400 hover:text-blue-500",title:"View JSON"},[...t[5]||(t[5]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])],8,Jo)])]),e.createElementVNode("div",Qo,[e.createElementVNode("span",{class:"text-gray-400 mt-0.5",innerHTML:i.icon},null,8,Wo),e.createElementVNode("div",{class:"prose prose-sm dark:prose-invert max-w-none leading-snug",innerHTML:i.description},null,8,Zo)])])]))),128))]),e.createElementVNode("div",Ko,[e.createElementVNode("div",{innerHTML:o.pagination,class:"pagination-container"},null,8,Go)]),l.drawer.open?(e.openBlock(),e.createElementBlock("div",{key:0,class:"fixed inset-0 z-[100] z-[99]",onKeydown:t[3]||(t[3]=e.withKeys((...i)=>s.closeJson&&s.closeJson(...i),["esc"]))},[e.createElementVNode("div",{class:"absolute inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity",onClick:t[0]||(t[0]=(...i)=>s.closeJson&&s.closeJson(...i))}),e.createElementVNode("div",{class:e.normalizeClass(["absolute inset-y-0 right-0 max-w-2xl w-full bg-white dark:bg-gray-900 shadow-xl flex flex-col transform transition-transform duration-300 ease-spring drawer",{"translate-x-full":!l.drawer.visible,"translate-x-0":l.drawer.visible}])},[e.createElementVNode("div",Xo,[e.createElementVNode("div",Yo,[t[6]||(t[6]=e.createElementVNode("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Payload Inspector",-1)),e.createElementVNode("span",vo,e.toDisplayString(l.drawer.uuid),1)]),e.createElementVNode("button",{onClick:t[1]||(t[1]=(...i)=>s.closeJson&&s.closeJson(...i)),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"},[...t[7]||(t[7]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e.createElementVNode("div",en,[e.createElementVNode("div",tn,[e.createElementVNode("pre",on,[e.createElementVNode("code",nn,e.toDisplayString(l.drawer.content),1)])])]),e.createElementVNode("div",ln,[e.createElementVNode("button",{onClick:t[2]||(t[2]=(...i)=>s.closeJson&&s.closeJson(...i)),class:"btn"},"Close")])],2)],32)):e.createCommentVNode("",!0)])}const sn=p(Fo,[["render",rn],["__scopeId","data-v-5bd1ae8c"]]),an={mixins:[window.__STATAMIC__?.core?.FieldtypeMixin||{}],props:{modelValue:{default:void 0}},data(){return{selected:this.modelValue!==void 0?this.modelValue:this.value}},watch:{value(n){this.selected=n},modelValue(n){this.selected=n},selected(n){this.update(n),this.$emit("update:modelValue",n)}}},dn={class:"actor-selector-wrapper"},cn={key:0,disabled:"",value:""},mn=["value"];function pn(n,t,o,c,l,s){return e.openBlock(),e.createElementBlock("div",dn,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[0]||(t[0]=i=>l.selected=i),class:"input-text w-full"},[!n.meta.actors||n.meta.actors.length===0?(e.openBlock(),e.createElementBlock("option",cn,e.toDisplayString(n.__("No actors found")),1)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.meta.actors,i=>(e.openBlock(),e.createElementBlock("option",{key:i.value,value:i.value},e.toDisplayString(i.label),9,mn))),128))],512),[[e.vModelSelect,l.selected]])])}const gn=p(an,[["render",pn]]),hn=e.defineComponent({props:{saving:Boolean,success:Boolean,error:String},emits:["save"]}),bn={class:"flex flex-wrap items-center justify-between gap-4 px-2 sm:px-0 py-6 max-md:pb-8 md:py-8"},kn={class:"flex items-center gap-2"},fn={key:0,class:"text-green-600 text-sm font-medium animate-pulse"},yn={key:1,class:"text-red-500 text-sm"},xn=["disabled"];function wn(n,t,o,c,l,s){return e.openBlock(),e.createElementBlock("header",bn,[t[1]||(t[1]=e.createElementVNode("h1",{class:"text-[25px] leading-[1.25] st-text-legibility font-medium antialiased flex items-center gap-2.5 md:flex-1"}," ActivityPub Settings ",-1)),e.createElementVNode("div",kn,[n.success?(e.openBlock(),e.createElementBlock("span",fn,"Saved")):e.createCommentVNode("",!0),n.error?(e.openBlock(),e.createElementBlock("p",yn,e.toDisplayString(n.error),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{type:"button",class:"relative inline-flex items-center justify-center whitespace-nowrap shrink-0 font-medium antialiased cursor-pointer no-underline disabled:[&_svg]:opacity-30 disabled:cursor-not-allowed [&_svg]:shrink-0 dark:[&_svg]:text-white bg-linear-to-b from-primary/90 to-primary hover:bg-primary-hover text-white disabled:opacity-60 disabled:text-white dark:disabled:text-white border border-primary-border shadow-ui-md inset-shadow-2xs inset-shadow-white/25 disabled:inset-shadow-none dark:disabled:inset-shadow-none [&_svg]:text-white [&_svg]:opacity-60 px-4 h-10 text-sm gap-2 rounded-lg",onClick:t[0]||(t[0]=i=>n.$emit("save")),disabled:n.saving},e.toDisplayString(n.saving?"Saving...":"Save Settings"),9,xn)])])}const un=p(hn,[["render",wn]]),_n=e.defineComponent({props:{title:String,description:String}}),Nn={class:"@container/panel relative bg-gray-150 dark:bg-gray-950/35 dark:inset-shadow-2xs dark:inset-shadow-black w-full rounded-2xl mb-8 max-[600px]:p-1.25 p-1.75 [&:has(>[data-ui-panel-header])]:pt-0 focus-none starting-style-transition"},Vn={key:0},En={class:"py-2 px-4"},Bn={key:0,class:"font-bold settings-panel-title"},Cn={key:1,class:"text-xs text-gray-500 settings-panel-description"},Sn={key:2,class:"h-auto visible transition-[height,visibility] duration-[250ms,2s]"},jn={class:"bg-white dark:bg-gray-850 rounded-xl ring ring-gray-200 dark:ring-x-0 dark:ring-b-0 dark:ring-gray-700/80 shadow-ui-md px-4 sm:px-4.5 py-5 space-y-6"},Dn={class:"space-y-4"},$n={key:0,class:"pt-4 border-t dark:border-gray-700"};function Fn(n,t,o,c,l,s){return e.openBlock(),e.createElementBlock("div",Nn,[n.$slots.header||n.title?(e.openBlock(),e.createElementBlock("div",Vn,[e.createElementVNode("header",En,[n.title?(e.openBlock(),e.createElementBlock("span",Bn,e.toDisplayString(n.title),1)):e.createCommentVNode("",!0),n.description?(e.openBlock(),e.createElementBlock("span",Cn,e.toDisplayString(n.description),1)):e.createCommentVNode("",!0),e.renderSlot(n.$slots,"header")])])):e.createCommentVNode("",!0),n.$slots.table?e.renderSlot(n.$slots,"table",{key:1}):(e.openBlock(),e.createElementBlock("div",Sn,[e.createElementVNode("div",jn,[e.createElementVNode("div",Dn,[e.renderSlot(n.$slots,"default")]),n.$slots.footer?(e.openBlock(),e.createElementBlock("div",$n,[e.renderSlot(n.$slots,"footer")])):e.createCommentVNode("",!0)])]))])}const f=p(_n,[["render",Fn]]),Mn={components:{SettingsPanel:f},props:{form:Object,collections:Array,taxonomies:Array,types:Object}},Un={class:"flex flex-col gap-6"},Tn={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4"},Ln={class:"toggle-container"},Pn=["checked"],An={class:"data-table"},In={class:"p-3"},Hn={class:"flex items-center gap-2"},zn=["innerHTML"],Rn={class:"p-3"},qn=["onUpdate:modelValue"],On=["value"],Jn={class:"p-3 text-center"},Qn=["onUpdate:modelValue"],Wn={class:"p-3 text-center"},Zn=["onUpdate:modelValue"],Kn={class:"data-table"},Gn={class:"divide-y dark:divide-dark-800"},Xn={class:"p-3"},Yn={class:"flex items-center gap-2"},vn={class:"p-3"},el=["onUpdate:modelValue"],tl=["value"],ol={class:"p-3 text-center"},nl=["onUpdate:modelValue"];function ll(n,t,o,c,l,s){const i=e.resolveComponent("settings-panel");return e.openBlock(),e.createElementBlock("div",Un,[e.createVNode(i,{title:"General Behavior",description:"Configure global ActivityPub behavior."},{default:e.withCtx(()=>[e.createElementVNode("div",Tn,[t[1]||(t[1]=e.createElementVNode("div",null,[e.createElementVNode("label",{class:"font-bold text-sm"},"Allow Quotes"),e.createElementVNode("p",{class:"text-sm text-gray-500"},'Allow others to quote/boost your activities. Adds "canQuote" permission.')],-1)),e.createElementVNode("div",Ln,[e.createElementVNode("input",{type:"checkbox",checked:o.form.allow_quotes,onChange:t[0]||(t[0]=r=>n.$emit("update:allow_quotes",r.target.checked))},null,40,Pn)])])]),_:1}),e.createVNode(i,{title:"Collections",description:"Select which content collections to publish."},{table:e.withCtx(()=>[e.createElementVNode("table",An,[t[2]||(t[2]=e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"Collection"),e.createElementVNode("th",null,"ActivityPub Type"),e.createElementVNode("th",null,"Publish"),e.createElementVNode("th",null,"Federate")])],-1)),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.collections,r=>(e.openBlock(),e.createElementBlock("tr",{key:r.handle},[e.createElementVNode("td",In,[e.createElementVNode("div",Hn,[r.icon?(e.openBlock(),e.createElementBlock("div",{key:0,class:"w-4 h-4",innerHTML:r.icon},null,8,zn)):e.createCommentVNode("",!0),e.createElementVNode("span",null,e.toDisplayString(r.title),1)])]),e.createElementVNode("td",Rn,[e.withDirectives(e.createElementVNode("select",{class:"input-text text-sm w-full","onUpdate:modelValue":d=>o.form.types[r.handle]=d},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.types,(d,a)=>(e.openBlock(),e.createElementBlock("option",{key:a,value:a},e.toDisplayString(d),9,On))),128))],8,qn),[[e.vModelSelect,o.form.types[r.handle]]])]),e.createElementVNode("td",Jn,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":d=>o.form.collections[r.handle]=d},null,8,Qn),[[e.vModelCheckbox,o.form.collections[r.handle]]])]),e.createElementVNode("td",Wn,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":d=>o.form.federated[r.handle]=d},null,8,Zn),[[e.vModelCheckbox,o.form.federated[r.handle]]])])]))),128))])])]),_:1}),e.createVNode(i,{title:"Taxonomies"},{table:e.withCtx(()=>[e.createElementVNode("table",Kn,[t[4]||(t[4]=e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"Taxonomy"),e.createElementVNode("th",null,"ActivityPub Type"),e.createElementVNode("th",null,"Publish")])],-1)),e.createElementVNode("tbody",Gn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.taxonomies,r=>(e.openBlock(),e.createElementBlock("tr",{key:r.handle},[e.createElementVNode("td",Xn,[e.createElementVNode("div",Yn,[t[3]||(t[3]=e.createElementVNode("svg",{class:"w-4 h-4 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),e.createElementVNode("span",null,e.toDisplayString(r.title),1)])]),e.createElementVNode("td",vn,[e.withDirectives(e.createElementVNode("select",{class:"input-text text-sm w-full","onUpdate:modelValue":d=>o.form.types[r.handle]=d},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.types,(d,a)=>(e.openBlock(),e.createElementBlock("option",{key:a,value:a},e.toDisplayString(d),9,tl))),128))],8,el),[[e.vModelSelect,o.form.types[r.handle]]])]),e.createElementVNode("td",ol,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":d=>o.form.collections[r.handle]=d},null,8,nl),[[e.vModelCheckbox,o.form.collections[r.handle]]])])]))),128))])])]),_:1})])}const rl=p(Mn,[["render",ll]]),sl={components:{SettingsPanel:f},props:{form:Object}},il={class:"flex flex-col gap-6"},al={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},dl={class:"border-t dark:border-dark-800 pt-4"},cl={class:"flex items-center gap-4"},ml={class:"font-mono bg-gray-100 dark:bg-dark-600 px-2 py-1 rounded text-sm w-12 text-center"};function pl(n,t,o,c,l,s){const i=e.resolveComponent("settings-panel");return e.openBlock(),e.createElementBlock("div",il,[e.createVNode(i,{title:"Inbox / Outbox Processing",description:"Configure batch sizes and schedule frequency."},{default:e.withCtx(()=>[e.createElementVNode("div",al,[e.createElementVNode("div",null,[t[3]||(t[3]=e.createElementVNode("label",{class:"font-bold text-sm block mb-1"},"Inbox Batch Size",-1)),t[4]||(t[4]=e.createElementVNode("p",{class:"text-xs text-gray-500 mb-2"},"Items to process per run.",-1)),e.withDirectives(e.createElementVNode("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=r=>o.form.inbox_batch_size=r),class:"input-text w-full",min:"1"},null,512),[[e.vModelText,o.form.inbox_batch_size,void 0,{number:!0}]])]),e.createElementVNode("div",null,[t[5]||(t[5]=e.createElementVNode("label",{class:"font-bold text-sm block mb-1"},"Outbox Batch Size",-1)),t[6]||(t[6]=e.createElementVNode("p",{class:"text-xs text-gray-500 mb-2"},"Items to send per run.",-1)),e.withDirectives(e.createElementVNode("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=r=>o.form.outbox_batch_size=r),class:"input-text w-full",min:"1"},null,512),[[e.vModelText,o.form.outbox_batch_size,void 0,{number:!0}]])])]),e.createElementVNode("div",dl,[t[7]||(t[7]=e.createElementVNode("label",{class:"font-bold text-sm block mb-1"},"Schedule Interval (minutes)",-1)),t[8]||(t[8]=e.createElementVNode("p",{class:"text-xs text-gray-500 mb-2"},"How often the scheduled job executes (default: 1 min).",-1)),e.createElementVNode("div",cl,[e.withDirectives(e.createElementVNode("input",{type:"range","onUpdate:modelValue":t[2]||(t[2]=r=>o.form.schedule_interval=r),class:"w-full max-w-sm h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700",min:"1",max:"60"},null,512),[[e.vModelText,o.form.schedule_interval,void 0,{number:!0}]]),e.createElementVNode("span",ml,e.toDisplayString(o.form.schedule_interval)+"m",1)])])]),_:1})])}const gl=p(sl,[["render",pl]]),hl={components:{SettingsPanel:f},props:{form:Object,logsUrl:String}},bl={class:"flex flex-col gap-6"},kl={class:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-dark-800"},fl={class:"flex items-center justify-between"},yl=["href"];function xl(n,t,o,c,l,s){const i=e.resolveComponent("settings-panel");return e.openBlock(),e.createElementBlock("div",bl,[e.createVNode(i,{title:"Automatic Cleanup",description:"Manage data retention policies."},{default:e.withCtx(()=>[e.createElementVNode("div",null,[t[3]||(t[3]=e.createElementVNode("label",{class:"font-bold text-sm block mb-1"},"Maintenance Time",-1)),t[4]||(t[4]=e.createElementVNode("p",{class:"text-xs text-gray-500 mb-2"},"Daily run time (24h format).",-1)),e.withDirectives(e.createElementVNode("input",{type:"time","onUpdate:modelValue":t[0]||(t[0]=r=>o.form.maintenance_time=r),class:"input-text max-w-xs"},null,512),[[e.vModelText,o.form.maintenance_time]])]),e.createElementVNode("div",kl,[e.createElementVNode("div",null,[t[5]||(t[5]=e.createElementVNode("label",{class:"font-bold text-sm block mb-1"},"Clean Activities (Days)",-1)),t[6]||(t[6]=e.createElementVNode("p",{class:"text-xs text-gray-500 mb-2"},"Keep external activities (Likes, Announces) for X days.",-1)),e.withDirectives(e.createElementVNode("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=r=>o.form.retention_activities=r),class:"input-text w-full",min:"0"},null,512),[[e.vModelText,o.form.retention_activities,void 0,{number:!0}]])]),e.createElementVNode("div",null,[t[7]||(t[7]=e.createElementVNode("label",{class:"font-bold text-sm block mb-1"},"Clean Objects (Days)",-1)),t[8]||(t[8]=e.createElementVNode("p",{class:"text-xs text-gray-500 mb-2"},"Keep external objects (Notes, Articles) for X days.",-1)),e.withDirectives(e.createElementVNode("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=r=>o.form.retention_entries=r),class:"input-text w-full",min:"0"},null,512),[[e.vModelText,o.form.retention_entries,void 0,{number:!0}]])])])]),_:1}),e.createVNode(i,{title:"Activity Logs",description:"View detailed logs for inbox and outbox processing."},{default:e.withCtx(()=>[e.createElementVNode("div",fl,[t[9]||(t[9]=e.createElementVNode("div",null,[e.createElementVNode("p",{class:"text-sm text-gray-500"},"Useful for debugging connection issues.")],-1)),e.createElementVNode("a",{href:o.logsUrl,class:"btn"},"View Logs",8,yl)])]),_:1})])}const wl=p(hl,[["render",xl]]),ul={components:{SettingsPanel:f},props:{form:Object}},_l={class:"flex flex-col gap-6"};function Nl(n,t,o,c,l,s){const i=e.resolveComponent("settings-panel");return e.openBlock(),e.createElementBlock("div",_l,[e.createVNode(i,{title:"Domain Blocklist",description:"Prevent interactions with specific domains."},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.form.blocklist=r),class:"input-text w-full h-64 font-mono text-sm",placeholder:"example.com\\nspam.server.social",rows:"25"},null,512),[[e.vModelText,o.form.blocklist]]),t[1]||(t[1]=e.createElementVNode("p",{class:"text-xs text-gray-500 mt-2"},[e.createTextVNode(" One domain per line. Subdomains are automatically blocked if the parent is listed. See "),e.createElementVNode("a",{href:"https://github.com/gardenfence/blocklist/blob/main/gardenfence.txt",target:"_blank",class:"text-blue-500 hover:underline"},"GardenFence"),e.createTextVNode(" for a starter list. ")],-1))]),_:1})])}const Vl={components:{SettingsTitle:un,SettingsContent:rl,SettingsScheduling:gl,SettingsMaintenance:wl,SettingsBlocklist:p(ul,[["render",Nl]])},props:{initialSettings:{type:Object,required:!0},collections:{type:Array,default:()=>[]},taxonomies:{type:Array,default:()=>[]},types:{type:Object,default:()=>({})},saveUrl:{type:String,required:!0},logsUrl:{type:String,required:!0}},data(){return{currentTab:"content",tabs:[{id:"content",label:"Content"},{id:"scheduling",label:"Scheduling"},{id:"maintenance",label:"Maintenance"},{id:"blocklist",label:"Blocklist"}],form:{allow_quotes:!1,inbox_batch_size:50,outbox_batch_size:50,schedule_interval:1,maintenance_time:"02:00",retention_activities:2,retention_entries:30,blocklist:"",collections:{},federated:{},types:{}},saving:!1,success:!1,error:null}},created(){try{const n={allow_quotes:this.initialSettings.allow_quotes||!1,inbox_batch_size:this.initialSettings.inbox_batch_size||50,outbox_batch_size:this.initialSettings.outbox_batch_size||50,schedule_interval:this.initialSettings.schedule_interval||1,maintenance_time:this.initialSettings.maintenance_time||"02:00",retention_activities:this.initialSettings.retention_activities||2,retention_entries:this.initialSettings.retention_entries||30,blocklist:this.initialSettings.blocklist||"",collections:{},federated:{},types:{}};this.collections.forEach(t=>{const o=this.initialSettings[t.handle]||{};n.collections[t.handle]=!!o.enabled,n.types[t.handle]=o.type||"Object",n.federated[t.handle]=!!o.federated}),this.taxonomies.forEach(t=>{const o=this.initialSettings[t.handle]||{};n.collections[t.handle]=!!o.enabled,n.types[t.handle]=o.type||"Object"}),this.form=n}catch(n){console.error("Error initializing Settings component:",n),this.error="Failed to load settings: "+n.message}},methods:{save(){this.saving=!0,this.success=!1,this.error=null;const n={collections:this.form.collections,types:this.form.types,federated:this.form.federated,allow_quotes:this.form.allow_quotes?1:0,inbox_batch_size:this.form.inbox_batch_size,outbox_batch_size:this.form.outbox_batch_size,schedule_interval:this.form.schedule_interval,maintenance_time:this.form.maintenance_time,retention_activities:this.form.retention_activities,retention_entries:this.form.retention_entries,blocklist:this.form.blocklist};this.$axios.post(this.saveUrl,n).then(t=>{this.success=!0,setTimeout(()=>{this.success=!1},3e3),Statamic.$toast.success("Settings saved successfully.")}).catch(t=>{console.error(t);const o=t.response?.data?.message||"Failed to save settings.";this.error=o,Statamic.$toast.error(o)}).finally(()=>{this.saving=!1})}}},El={class:"max-w-5xl mx-auto"},Bl={class:"flex flex-col gap-6"},Cl={class:"w-full flex border-b dark:border-dark-800"},Sl=["onClick"],jl={key:0},Dl={key:1},$l={key:2},Fl={key:3};function Ml(n,t,o,c,l,s){const i=e.resolveComponent("settings-title"),r=e.resolveComponent("settings-content"),d=e.resolveComponent("settings-scheduling"),a=e.resolveComponent("settings-maintenance"),g=e.resolveComponent("settings-blocklist");return e.openBlock(),e.createElementBlock("div",El,[e.createVNode(i,{saving:l.saving,success:l.success,error:l.error,onSave:s.save},null,8,["saving","success","error","onSave"]),e.createElementVNode("div",Bl,[e.createElementVNode("div",Cl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.tabs,m=>(e.openBlock(),e.createElementBlock("button",{key:m.id,onClick:e.withModifiers(_=>l.currentTab=m.id,["prevent"]),class:e.normalizeClass(["px-4 py-2 text-sm font-medium border-b-2 transition-colors focus:outline-none",l.currentTab===m.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"])},e.toDisplayString(m.label),11,Sl))),128))]),l.currentTab==="content"?(e.openBlock(),e.createElementBlock("div",jl,[e.createVNode(r,{form:l.form,collections:o.collections,taxonomies:o.taxonomies,types:o.types,"onUpdate:allow_quotes":t[0]||(t[0]=m=>l.form.allow_quotes=m)},null,8,["form","collections","taxonomies","types"])])):e.createCommentVNode("",!0),l.currentTab==="scheduling"?(e.openBlock(),e.createElementBlock("div",Dl,[e.createVNode(d,{form:l.form},null,8,["form"])])):e.createCommentVNode("",!0),l.currentTab==="maintenance"?(e.openBlock(),e.createElementBlock("div",$l,[e.createVNode(a,{form:l.form,"logs-url":o.logsUrl},null,8,["form","logs-url"])])):e.createCommentVNode("",!0),l.currentTab==="blocklist"?(e.openBlock(),e.createElementBlock("div",Fl,[e.createVNode(g,{form:l.form},null,8,["form"])])):e.createCommentVNode("",!0)])])}const Ul=p(Vl,[["render",Ml]]),Tl=e.defineComponent({name:"FollowingTitleV6"}),Ll={class:"flex flex-wrap items-center justify-between gap-4 px-2 sm:px-0 py-6 max-md:pb-8 md:py-8"};function Pl(n,t,o,c,l,s){return e.openBlock(),e.createElementBlock("header",Ll,[...t[0]||(t[0]=[e.createElementVNode("h1",{class:"text-[25px] leading-[1.25] st-text-legibility font-medium antialiased flex items-center gap-2.5 md:flex-1"}," Following ",-1)])])}const Al=p(Tl,[["render",Pl]]),Il={name:"FollowingListV6",props:{title:{type:String,required:!0},actors:{type:Array,default:()=>[]},emptyText:{type:String,default:"No actors found."}}},Hl={class:"@container/panel relative bg-gray-150 dark:bg-gray-950/35 dark:inset-shadow-2xs dark:inset-shadow-black w-full rounded-2xl mb-8 max-[600px]:p-1.25 p-1.75 [&:has(>[data-ui-panel-header])]:pt-0 focus-none starting-style-transition"},zl={class:"px-4 py-2"},Rl={class:"font-bold"},ql={class:"data-table"},Ol={key:0},Jl={colspan:"2",class:"text-gray-500 text-center py-4"},Ql={class:"flex items-center gap-2"},Wl=["src"],Zl={key:1,class:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-xs text-gray-500"},Kl={class:"font-bold"},Gl={class:"text-xs text-gray-500"},Xl={class:"text-right"},Yl={class:"flex gap-2 justify-end"};function vl(n,t,o,c,l,s){return e.openBlock(),e.createElementBlock("div",Hl,[e.createElementVNode("header",zl,[e.createElementVNode("span",Rl,e.toDisplayString(o.title),1)]),e.createElementVNode("table",ql,[t[0]||(t[0]=e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"Actor"),e.createElementVNode("th",{class:"text-right"},"Actions")])],-1)),e.createElementVNode("tbody",null,[o.actors.length===0?(e.openBlock(),e.createElementBlock("tr",Ol,[e.createElementVNode("td",Jl,e.toDisplayString(o.emptyText),1)])):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(o.actors,i=>(e.openBlock(),e.createElementBlock("tr",{key:i.id},[e.createElementVNode("td",null,[e.createElementVNode("div",Ql,[i.avatar?(e.openBlock(),e.createElementBlock("img",{key:0,src:i.avatar,class:"w-8 h-8 rounded-full object-cover"},null,8,Wl)):(e.openBlock(),e.createElementBlock("div",Zl,e.toDisplayString(i.title.charAt(0)),1)),e.createElementVNode("div",null,[e.createElementVNode("div",Kl,e.toDisplayString(i.title),1),e.createElementVNode("div",Gl,e.toDisplayString(i.activitypub_id),1)])])]),e.createElementVNode("td",Xl,[e.createElementVNode("div",Yl,[e.renderSlot(n.$slots,"actions",{actor:i})])])]))),128))])])])}const w=p(Il,[["render",vl]]),er={data(){return{handle:"",loading:!1,error:null,result:null,followLoading:!1,followSuccess:!1}},methods:{search(){this.handle&&(this.loading=!0,this.error=null,this.result=null,this.followSuccess=!1,this.$axios.post("/cp/activitypub/search",{handle:this.handle}).then(n=>{this.result=n.data}).catch(n=>{this.error=n.response?.data?.error||n.message}).finally(()=>{this.loading=!1}))},follow(n){this.followLoading=!0,this.$axios.post("/cp/activitypub/follow",{id:n}).then(t=>{this.followSuccess=!0,this.result.is_pending=!0,setTimeout(()=>{this.$emit("followed")},2e3)}).catch(t=>{Statamic.$toast.error("Follow failed: "+(t.response?.data?.error||t.message))}).finally(()=>{this.followLoading=!1})}}},tr={class:"@container/panel relative bg-gray-150 dark:bg-gray-950/35 dark:inset-shadow-2xs dark:inset-shadow-black w-full rounded-2xl mb-8 max-[600px]:p-1.25 p-1.75 [&:has(>[data-ui-panel-header])]:pt-0 focus-none starting-style-transition"},or={class:"h-auto visible transition-[height,visibility] duration-[250ms,2s]"},nr={class:"bg-white dark:bg-gray-850 rounded-xl ring ring-gray-200 dark:ring-x-0 dark:ring-b-0 dark:ring-gray-700/80 shadow-ui-md px-4 sm:px-4.5 py-5 space-y-6"},lr={class:"flex gap-2"},rr=["disabled"],sr={key:0,class:"mt-4"},ir={key:0,class:"loading loading-basic"},ar={key:1,class:"text-red-500"},dr={key:2,class:"flex items-center justify-between border p-3 rounded bg-gray-50 dark:bg-gray-800 dark:border-gray-700"},cr={class:"flex items-center gap-3"},mr=["src"],pr={key:1,class:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-500 font-bold text-lg"},gr={class:"font-bold text-lg"},hr={class:"text-sm text-gray-500 mb-1"},br={key:0,class:"text-green-600 flex items-center gap-1 text-sm"},kr={key:1,class:"text-yellow-600 flex items-center gap-1 text-sm"},fr=["disabled"],yr={key:1,class:"flex flex-col items-center animate-pulse text-green-600"};function xr(n,t,o,c,l,s){return e.openBlock(),e.createElementBlock("div",tr,[t[8]||(t[8]=e.createElementVNode("header",{class:"px-4 py-2"},[e.createElementVNode("span",{class:"font-bold"},"Find People to Follow")],-1)),e.createElementVNode("div",or,[e.createElementVNode("div",nr,[e.createElementVNode("div",lr,[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=i=>l.handle=i),class:"input-text flex-1",placeholder:"nick@whoisnick.com",onKeyup:t[1]||(t[1]=e.withKeys((...i)=>s.search&&s.search(...i),["enter"]))},null,544),[[e.vModelText,l.handle]]),e.createElementVNode("button",{onClick:t[2]||(t[2]=(...i)=>s.search&&s.search(...i)),class:"relative inline-flex items-center justify-center whitespace-nowrap shrink-0 font-medium antialiased cursor-pointer no-underline disabled:[&_svg]:opacity-30 disabled:cursor-not-allowed [&_svg]:shrink-0 dark:[&_svg]:text-white bg-linear-to-b from-primary/90 to-primary hover:bg-primary-hover text-white disabled:opacity-60 disabled:text-white dark:disabled:text-white border border-primary-border shadow-ui-md inset-shadow-2xs inset-shadow-white/25 disabled:inset-shadow-none dark:disabled:inset-shadow-none [&_svg]:text-white [&_svg]:opacity-60 px-4 h-10 text-sm gap-2 rounded-lg",disabled:l.loading},e.toDisplayString(l.loading?"Searching...":"Search"),9,rr)]),l.result||l.error||l.loading?(e.openBlock(),e.createElementBlock("div",sr,[l.loading?(e.openBlock(),e.createElementBlock("div",ir,[...t[4]||(t[4]=[e.createElementVNode("span",{class:"icon icon-circular-graph animation-spin"},null,-1),e.createTextVNode(" Searching... ",-1)])])):l.error?(e.openBlock(),e.createElementBlock("div",ar,e.toDisplayString(l.error),1)):l.result?(e.openBlock(),e.createElementBlock("div",dr,[e.createElementVNode("div",cr,[l.result.avatar?(e.openBlock(),e.createElementBlock("img",{key:0,src:l.result.avatar,class:"w-10 h-10 rounded-full object-cover"},null,8,mr)):(e.openBlock(),e.createElementBlock("div",pr,e.toDisplayString(l.result.name?l.result.name.charAt(0):"?"),1)),e.createElementVNode("div",null,[e.createElementVNode("div",gr,e.toDisplayString(l.result.name),1),e.createElementVNode("div",hr,e.toDisplayString(l.result.activitypub_id),1),l.result.is_following?(e.openBlock(),e.createElementBlock("span",br,[...t[5]||(t[5]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),e.createTextVNode(" Following ",-1)])])):l.result.is_pending?(e.openBlock(),e.createElementBlock("span",kr,[...t[6]||(t[6]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1),e.createTextVNode(" Pending ",-1)])])):e.createCommentVNode("",!0)])]),e.createElementVNode("div",null,[!l.result.is_following&&!l.result.is_pending?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:t[3]||(t[3]=i=>s.follow(l.result.id)),class:"btn",disabled:l.followLoading},e.toDisplayString(l.followLoading?"Following...":"Follow"),9,fr)):e.createCommentVNode("",!0),l.followSuccess?(e.openBlock(),e.createElementBlock("div",yr,[...t[7]||(t[7]=[e.createElementVNode("span",{class:"flex items-center gap-1 font-bold"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),e.createTextVNode(" Request Sent! ")],-1)])])):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])])])}const wr={components:{FollowingTitle:Al,FollowingList:w,ActorSearch:p(er,[["render",xr]])},data(){return{loading:!0,myActors:[],actors:[],links:{},meta:{},endpoint:"/cp/activitypub/following/api"}},mounted(){this.fetchData()},methods:{fetchData(n=null){this.loading=!0;const t=n||this.endpoint;this.$axios.get(t).then(o=>{this.actors=o.data.actors.data,this.myActors=o.data.myActors;const c=o.data.actors;this.meta={current_page:c.current_page,last_page:c.last_page,from:c.from,to:c.to,total:c.total},this.links={prev:c.prev_page_url,next:c.next_page_url}}).catch(o=>{Statamic.$toast.error(o.message)}).finally(()=>{this.loading=!1})},fetchPage(n){n&&this.fetchData(n)},getFollowingFor(n){const t=n.following_ids||[];return this.actors.filter(o=>t.includes(o.id))},isBlocking(n,t){return(n.block_ids||[]).includes(t)},performAction(n,t,o){n==="unfollow"&&!confirm("Are you sure you want to unfollow this actor?")||n==="block"&&!confirm("Are you sure you want to block this actor?")||this.$axios.post("/cp/activitypub/"+n,{id:t,sender:o}).then(c=>{Statamic.$toast.success("Action "+n+" successful"),this.fetchData()}).catch(c=>{Statamic.$toast.error("Action failed: "+(c.response?.data?.error||c.message))})}}},ur={class:"max-w-5xl mx-auto"},_r={key:0,class:"loading loading-basic"},Nr={key:1},Vr=["onClick"],Er=["onClick"],Br=["onClick"],Cr={key:0,class:"flex justify-between items-center mt-4"},Sr=["disabled"],jr={class:"text-sm text-gray-600"},Dr=["disabled"];function $r(n,t,o,c,l,s){const i=e.resolveComponent("following-title"),r=e.resolveComponent("actor-search"),d=e.resolveComponent("following-list");return e.openBlock(),e.createElementBlock("div",ur,[e.createVNode(i),e.createVNode(r,{onFollowed:s.fetchData},null,8,["onFollowed"]),l.loading?(e.openBlock(),e.createElementBlock("div",_r,[...t[2]||(t[2]=[e.createElementVNode("div",{class:"@container/panel relative bg-gray-150 dark:bg-gray-950/35 dark:inset-shadow-2xs dark:inset-shadow-black w-full rounded-2xl mb-8 max-[600px]:p-1.25 p-1.75 [&:has(>[data-ui-panel-header])]:pt-0 focus-none starting-style-transition"},[e.createElementVNode("div",{class:"h-auto visible transition-[height,visibility] duration-[250ms,2s]"},[e.createElementVNode("div",{class:"bg-white dark:bg-gray-850 rounded-xl ring ring-gray-200 dark:ring-x-0 dark:ring-b-0 dark:ring-gray-700/80 shadow-ui-md px-4 sm:px-4.5 py-5 space-y-6"},[e.createElementVNode("span",{class:"icon icon-circular-graph animation-spin"}),e.createTextVNode(" Loading... ")])])],-1)])])):(e.openBlock(),e.createElementBlock("div",Nr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.myActors,a=>(e.openBlock(),e.createElementBlock("div",{key:a.id},[e.createVNode(d,{title:a.title+"'s Following",actors:s.getFollowingFor(a),"empty-text":"Not following anyone (on this page)."},{actions:e.withCtx(({actor:g})=>[e.createElementVNode("button",{class:"btn btn-sm",onClick:m=>s.performAction("unfollow",g.id,a.id)},"Unfollow",8,Vr),s.isBlocking(a,g.id)?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-danger",onClick:m=>s.performAction("unblock",g.id,a.id)},"Unblock",8,Er)):(e.openBlock(),e.createElementBlock("button",{key:1,class:"btn btn-sm",onClick:m=>s.performAction("block",g.id,a.id)},"Block",8,Br))]),_:2},1032,["title","actors"])]))),128)),l.meta&&l.meta.last_page>1?(e.openBlock(),e.createElementBlock("div",Cr,[e.createElementVNode("button",{disabled:!l.links.prev,onClick:t[0]||(t[0]=a=>s.fetchPage(l.links.prev)),class:e.normalizeClass(["btn",{"opacity-50":!l.links.prev}])},"Previous",10,Sr),e.createElementVNode("span",jr,"Page "+e.toDisplayString(l.meta.current_page)+" of "+e.toDisplayString(l.meta.last_page),1),e.createElementVNode("button",{disabled:!l.links.next,onClick:t[1]||(t[1]=a=>s.fetchPage(l.links.next)),class:e.normalizeClass(["btn",{"opacity-50":!l.links.next}])},"Next",10,Dr)])):e.createCommentVNode("",!0)]))])}const Fr=p(wr,[["render",$r]]),Mr=e.defineComponent({name:"FollowersTitleV6"}),Ur={class:"flex flex-wrap items-center justify-between gap-4 px-2 sm:px-0 py-6 max-md:pb-8 md:py-8"};function Tr(n,t,o,c,l,s){return e.openBlock(),e.createElementBlock("header",Ur,[...t[0]||(t[0]=[e.createElementVNode("h1",{class:"text-[25px] leading-[1.25] st-text-legibility font-medium antialiased flex items-center gap-2.5 md:flex-1"}," Followers ",-1)])])}const Lr={components:{FollowersTitle:p(Mr,[["render",Tr]]),FollowingList:w},data(){return{loading:!0,myActors:[],actors:[],links:{},meta:{},endpoint:"/cp/activitypub/followers/api"}},mounted(){this.fetchData()},methods:{fetchData(n=null){this.loading=!0;const t=n||this.endpoint;this.$axios.get(t).then(o=>{this.actors=o.data.actors.data,this.myActors=o.data.myActors,this.links=o.data.actors.links||{prev:o.data.actors.prev_page_url,next:o.data.actors.next_page_url},this.meta=o.data.actors.meta||{current_page:o.data.actors.current_page,last_page:o.data.actors.last_page,from:o.data.actors.from,to:o.data.actors.to,total:o.data.actors.total}}).catch(o=>{Statamic.$toast.error(o.message)}).finally(()=>{this.loading=!1})},fetchPage(n){n&&this.fetchData(n)},getFollowersFor(n){const t=n.follower_ids||[];return this.actors.filter(o=>t.includes(o.id))},isFollowing(n,t){return(n.following_ids||[]).includes(t)},isBlocking(n,t){return(n.block_ids||[]).includes(t)},performAction(n,t,o){n==="unfollow"&&!confirm("Are you sure you want to unfollow this actor?")||n==="block"&&!confirm("Are you sure you want to block this actor?")||this.$axios.post("/cp/activitypub/"+n,{id:t,sender:o}).then(c=>{Statamic.$toast.success("Action "+n+" successful"),this.fetchData()}).catch(c=>{Statamic.$toast.error("Action failed: "+(c.response?.data?.error||c.message))})}}},Pr={class:"max-w-5xl mx-auto"},Ar={key:0,class:"loading loading-basic"},Ir={key:1},Hr=["onClick"],zr=["onClick"],Rr=["onClick"],qr=["onClick"],Or={key:0,class:"flex justify-between items-center mt-4"},Jr=["disabled"],Qr={class:"text-sm text-gray-600"},Wr=["disabled"];function Zr(n,t,o,c,l,s){const i=e.resolveComponent("followers-title"),r=e.resolveComponent("following-list");return e.openBlock(),e.createElementBlock("div",Pr,[e.createVNode(i),l.loading?(e.openBlock(),e.createElementBlock("div",Ar,[...t[2]||(t[2]=[e.createElementVNode("div",{class:"@container/panel relative bg-gray-150 dark:bg-gray-950/35 dark:inset-shadow-2xs dark:inset-shadow-black w-full rounded-2xl mb-8 max-[600px]:p-1.25 p-1.75 [&:has(>[data-ui-panel-header])]:pt-0 focus-none starting-style-transition"},[e.createElementVNode("div",{class:"h-auto visible transition-[height,visibility] duration-[250ms,2s]"},[e.createElementVNode("div",{class:"bg-white dark:bg-gray-850 rounded-xl ring ring-gray-200 dark:ring-x-0 dark:ring-b-0 dark:ring-gray-700/80 shadow-ui-md px-4 sm:px-4.5 py-5 space-y-6"},[e.createElementVNode("span",{class:"icon icon-circular-graph animation-spin"}),e.createTextVNode(" Loading... ")])])],-1)])])):(e.openBlock(),e.createElementBlock("div",Ir,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.myActors,d=>(e.openBlock(),e.createElementBlock("div",{key:d.id},[e.createVNode(r,{title:d.title+"'s Followers",actors:s.getFollowersFor(d),"empty-text":"No followers found on this page."},{actions:e.withCtx(({actor:a})=>[s.isFollowing(d,a.id)?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm",onClick:g=>s.performAction("unfollow",a.id,d.id)},"Unfollow",8,Hr)):(e.openBlock(),e.createElementBlock("button",{key:1,class:"btn btn-sm btn-primary",onClick:g=>s.performAction("follow",a.id,d.id)},"Follow Back",8,zr)),s.isBlocking(d,a.id)?(e.openBlock(),e.createElementBlock("button",{key:2,class:"btn btn-sm btn-danger",onClick:g=>s.performAction("unblock",a.id,d.id)},"Unblock",8,Rr)):(e.openBlock(),e.createElementBlock("button",{key:3,class:"btn btn-sm",onClick:g=>s.performAction("block",a.id,d.id)},"Block",8,qr))]),_:2},1032,["title","actors"])]))),128)),l.meta&&l.meta.last_page>1?(e.openBlock(),e.createElementBlock("div",Or,[e.createElementVNode("button",{disabled:!l.links.prev,onClick:t[0]||(t[0]=d=>s.fetchPage(l.links.prev)),class:e.normalizeClass(["btn",{"opacity-50":!l.links.prev}])},"Previous",10,Jr),e.createElementVNode("span",Qr,"Page "+e.toDisplayString(l.meta.current_page)+" of "+e.toDisplayString(l.meta.last_page),1),e.createElementVNode("button",{disabled:!l.links.next,onClick:t[1]||(t[1]=d=>s.fetchPage(l.links.next)),class:e.normalizeClass(["btn",{"opacity-50":!l.links.next}])},"Next",10,Wr)])):e.createCommentVNode("",!0)]))])}const Kr=p(Lr,[["render",Zr]]),u=()=>{typeof Statamic<"u"?Statamic.booting(()=>{Statamic.$components.register("activity-pub-inbox",$o),Statamic.$components.register("activity-pub-log",sn),Statamic.$components.register("actor_selector-fieldtype",gn),Statamic.$components.register("activity-pub-settings",Ul),Statamic.$components.register("activity-pub-following",Fr),Statamic.$components.register("activity-pub-followers",Kr)}):setTimeout(u,10)};u()})(Vue);
