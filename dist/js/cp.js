const O=(t,e)=>{const s=t.__vccOpts||t;for(const[d,n]of e)s[d]=n;return s},te={name:"ActivityPubNote",props:{note:{type:Object,required:!0},permissions:{type:Object,default:()=>({update:!1,delete:!1})}},data(){return{isVoting:!1,selectedOptions:[],openEndedResponse:""}},methods:{hasVoted(t){return t.has_voted||t.closed},getPercentage(t,e){return!e.voters_count||e.voters_count===0?0:Math.round(t.count/e.voters_count*100)},formatTime(t){return new Date(t).toLocaleString()},submitVote(t){if(this.isVoting)return;let e=[];if(!t.options||t.options.length===0){if(!this.openEndedResponse.trim())return;e.push(this.openEndedResponse)}else if(Array.isArray(this.selectedOptions)?e=this.selectedOptions.map(d=>d.name):this.selectedOptions&&(e=[this.selectedOptions.name]),e.length===0)return;this.isVoting=!0;const s=(d,n=!0)=>{this.$emit("vote",{note:t,option:{name:d},callback:l=>{n&&(this.isVoting=!1,l&&(t.has_voted=!0,t.voters_count=(t.voters_count||0)+1,t.options&&e.forEach(a=>{const b=t.options.find(k=>k.name===a);b&&(b.count=(b.count||0)+1)})))}})};e.forEach((d,n)=>{s(d,n===e.length-1)})}}},r=window.Vue.createElementVNode,g=window.Vue.openBlock,h=window.Vue.createElementBlock,f=window.Vue.toDisplayString,v=window.Vue.createCommentVNode,oe=window.Vue.vModelText,R=window.Vue.withDirectives,U=window.Vue.Fragment,q=window.Vue.renderList,ne=window.Vue.normalizeStyle,se=window.Vue.vModelCheckbox,ie=window.Vue.vModelRadio,J=window.Vue.normalizeClass,F=window.Vue.createTextVNode,le=window.Vue.resolveComponent,K=window.Vue.createVNode,re=window.Vue.renderSlot,de={class:"hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors"},ae={key:0,class:"px-4 pt-3 flex items-center gap-2 text-gray-500 text-sm"},ue={class:"font-semibold text-gray-600 dark:text-gray-400"},ce={class:"flex-shrink-0"},ge=["src"],he={class:"flex-1 min-w-0"},me={class:"flex items-baseline justify-between gap-2"},we={class:"flex items-center gap-2 min-w-0"},pe={class:"font-bold truncate"},ye=["title"],ve={class:"flex items-center gap-2 flex-shrink-0"},be=["title"],fe=["innerHTML"],ke={key:2,class:"mt-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},xe={class:"flex justify-between items-center mb-2"},_e={key:0,class:"text-xs font-bold text-red-500"},Ce={key:1,class:"text-xs text-gray-400"},Ne={key:0,class:"flex flex-col gap-2"},Ve={key:0,class:"p-3 bg-gray-100 dark:bg-gray-700 rounded text-sm text-gray-500 italic"},Pe=["disabled"],Me={class:"flex justify-end mt-2"},Se=["disabled"],je={key:1,class:"flex flex-col gap-2"},Te={class:"relative flex items-center justify-between p-2 border border-blue-200 dark:border-blue-800 rounded z-10"},He={class:"text-sm font-medium"},Le={class:"text-xs text-gray-500"},Ue={key:1,class:"relative flex items-center p-2 border border-gray-200 dark:border-gray-700 rounded hover:bg-white dark:hover:bg-gray-700 cursor-pointer transition-colors"},Ee=["value"],Ae=["value"],Oe={class:"text-sm font-medium"},Be={key:0,class:"flex justify-end mt-2"},Ie=["disabled"],Re={class:"mt-2 text-xs text-gray-400 text-right"},Je={key:3,class:"mt-3 flex gap-2"},Qe=["onClick"],ze=["src","alt"],De=["innerHTML"],qe=["href"],Fe={class:"flex flex-col sm:flex-row h-full"},Ke={key:0,class:"sm:w-1/3 h-48 sm:h-auto relative overflow-hidden bg-gray-100 dark:bg-gray-900"},We=["src"],Xe={class:"p-4 flex flex-col justify-center flex-1 min-w-0"},Ze={class:"font-bold text-sm line-clamp-2 mb-1"},Ye={class:"text-xs text-gray-500 line-clamp-2 mb-2"},Ge={class:"flex items-center gap-2 mt-auto"},$e=["src"],et={class:"text-xs text-gray-400 uppercase tracking-wider"},tt={class:"mt-3 flex items-center gap-6 text-sm text-gray-500"},ot=["title"],nt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},st={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},it=["fill"],lt=["href"],rt={key:6,class:"mt-4 pt-4 border-l-4 border-gray-300 dark:border-gray-600 pl-4 ml-2 bg-gray-50/50 dark:bg-gray-800/30 rounded-r-lg"},dt={key:7,class:"mt-4 pt-4 border-l-4 border-purple-300 dark:border-purple-600 pl-4 ml-2 bg-purple-50/50 dark:bg-purple-900/10 rounded-r-lg"};function at(t,e,s,d,n,l){var b,k;const a=le("activity-pub-note",!0);return g(),h("div",de,[s.note.is_boost&&s.note.boosted_by?(g(),h("div",ae,[e[37]||(e[37]=r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),r("span",ue,f(s.note.boosted_by.name),1),e[38]||(e[38]=r("span",{class:"text-gray-400"},"boosted",-1))])):v("",!0),r("div",{class:J([{"px-4 pb-4 pt-1":s.note.is_boost,"p-4":!s.note.is_boost},"flex gap-4"])},[r("div",ce,[r("img",{src:s.note.actor.avatar||"https://www.gravatar.com/avatar/?d=mp",loading:"lazy",class:"w-12 h-12 rounded-full bg-gray-200 object-cover"},null,8,ge)]),r("div",he,[r("div",me,[r("div",we,[r("span",pe,f(s.note.actor.name),1),r("span",{class:"text-sm text-gray-500 truncate",title:s.note.actor.handle},f(s.note.actor.handle),9,ye)]),r("div",ve,[r("span",{class:"text-xs text-gray-400 whitespace-nowrap",title:s.note.date},f(s.note.date_human),9,be),s.note.is_internal&&s.permissions.update?(g(),h("button",{key:0,class:"text-gray-400 hover:text-blue-500 transition-colors",onClick:e[0]||(e[0]=o=>t.$emit("edit",s.note)),title:"Edit"},[...e[39]||(e[39]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])])):v("",!0),s.permissions.delete?(g(),h("button",{key:1,onClick:e[1]||(e[1]=o=>t.$emit("delete",s.note)),class:"text-gray-400 transition-colors delete-btn",title:"Delete"},[...e[40]||(e[40]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])):v("",!0)])]),s.note.sensitive?(g(),h("div",{key:0,onClick:e[2]||(e[2]=o=>s.note.showContent=!s.note.showContent),class:"mb-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded text-sm flex items-center gap-2 text-yellow-800 dark:text-yellow-200 cursor-pointer select-none"},[e[41]||(e[41]=r("span",null,"⚠️",-1)),r("span",null,f(s.note.summary||"Sensitive Content"),1)])):v("",!0),!s.note.sensitive||s.note.showContent?(g(),h("div",{key:1,class:"mt-2 prose dark:prose-invert text-sm max-w-none break-words",innerHTML:s.note.content},null,8,fe)):v("",!0),s.note.type==="question"?(g(),h("div",ke,[r("div",xe,[e[42]||(e[42]=r("span",{class:"text-xs font-bold uppercase text-gray-500"},"Poll",-1)),s.note.closed?(g(),h("span",_e,"Closed")):s.note.end_time?(g(),h("span",Ce,"Ends "+f(l.formatTime(s.note.end_time)),1)):v("",!0)]),!s.note.options||s.note.options.length===0?(g(),h("div",Ne,[l.hasVoted(s.note)||s.note.closed?(g(),h("div",Ve," Open-ended responses are hidden. ")):(g(),h(U,{key:1},[R(r("textarea",{"onUpdate:modelValue":e[3]||(e[3]=o=>n.openEndedResponse=o),class:"input-text w-full text-sm",rows:"3",placeholder:"Type your answer...",disabled:n.isVoting},null,8,Pe),[[oe,n.openEndedResponse]]),r("div",Me,[r("button",{onClick:e[4]||(e[4]=o=>l.submitVote(s.note)),disabled:n.isVoting||!n.openEndedResponse.trim(),class:"btn-primary text-xs px-3 py-1.5"},f(n.isVoting?"Submitting...":"Submit Answer"),9,Se)])],64))])):(g(),h("div",je,[(g(!0),h(U,null,q(s.note.options,(o,m)=>(g(),h("div",{key:m,class:"relative"},[l.hasVoted(s.note)||s.note.closed?(g(),h(U,{key:0},[r("div",{class:"absolute inset-y-0 left-0 bg-blue-100 dark:bg-blue-900/30 rounded",style:ne({width:l.getPercentage(o,s.note)+"%"})},null,4),r("div",Te,[r("span",He,f(o.name),1),r("span",Le,f(l.getPercentage(o,s.note))+"% ("+f(o.count)+") ",1)])],64)):(g(),h("label",Ue,[s.note.multiple_choice?R((g(),h("input",{key:0,type:"checkbox",value:o,"onUpdate:modelValue":e[5]||(e[5]=p=>n.selectedOptions=p),class:"mr-2 text-blue-600 focus:ring-blue-500 rounded"},null,8,Ee)),[[se,n.selectedOptions]]):R((g(),h("input",{key:1,type:"radio",value:o,"onUpdate:modelValue":e[6]||(e[6]=p=>n.selectedOptions=p),class:"mr-2 text-blue-600 focus:ring-blue-500"},null,8,Ae)),[[ie,n.selectedOptions]]),r("span",Oe,f(o.name),1)]))]))),128)),!l.hasVoted(s.note)&&!s.note.closed?(g(),h("div",Be,[r("button",{onClick:e[7]||(e[7]=o=>l.submitVote(s.note)),disabled:n.isVoting||!n.openEndedResponse&&n.selectedOptions.length===0&&!n.selectedOptions.name,class:"btn-primary text-xs px-3 py-1.5"},f(n.isVoting?"Voting...":"Vote"),9,Ie)])):v("",!0)])),r("div",Re,f(s.note.voters_count)+" votes ",1)])):v("",!0),s.note.attachments&&s.note.attachments.length>0?(g(),h("div",Je,[(g(!0),h(U,null,q(s.note.attachments.slice(0,3),(o,m)=>(g(),h("div",{key:m,class:"relative flex-1 cursor-pointer group overflow-hidden rounded-lg",onClick:p=>t.$emit("lightbox",{attachments:s.note.attachments,index:m})},[r("img",{src:o.url,alt:o.description,class:"w-full h-full object-cover transition-transform group-hover:scale-[1.02]",loading:"lazy"},null,8,ze)],8,Qe))),128))])):v("",!0),s.note.oembed&&s.note.oembed.html?(g(),h("div",{key:4,class:"mt-3",innerHTML:s.note.oembed.html},null,8,De)):v("",!0),s.note.link_preview&&!s.note.oembed?(g(),h("a",{key:5,href:s.note.link_preview.url,target:"_blank",class:"block mt-3 border rounded-lg overflow-hidden hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group no-underline"},[r("div",Fe,[s.note.link_preview.image?(g(),h("div",Ke,[r("img",{src:s.note.link_preview.image,class:"absolute inset-0 w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",loading:"lazy"},null,8,We)])):v("",!0),r("div",Xe,[r("h3",Ze,f(s.note.link_preview.title),1),r("p",Ye,f(s.note.link_preview.description),1),r("div",Ge,[s.note.link_preview.icon?(g(),h("img",{key:0,src:s.note.link_preview.icon,class:"w-4 h-4 rounded-sm"},null,8,$e)):v("",!0),r("span",et,f(s.note.link_preview.site_name||"Link"),1)])])])],8,qe)):v("",!0),r("div",tt,[["note","question"].includes(s.note.type)?(g(),h(U,{key:0},[s.note.sensitive?(g(),h("button",{key:0,class:"flex items-center gap-1 hover:text-blue-500 transition-colors",onClick:e[8]||(e[8]=o=>s.note.showContent=!s.note.showContent),title:s.note.showContent?"Hide Content":"Show Content"},[s.note.showContent?(g(),h("svg",st,[...e[44]||(e[44]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(g(),h("svg",nt,[...e[43]||(e[43]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))],8,ot)):v("",!0),r("button",{class:"flex items-center gap-1 text-gray-500 hover:text-blue-500 transition-colors",onClick:e[9]||(e[9]=o=>t.$emit("reply",s.note)),title:"Reply"},[...e[45]||(e[45]=[r("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})],-1)])]),r("button",{class:J(["flex items-center gap-1 transition-colors",s.note.boosted_by_user?"text-green-600":"text-gray-500 hover:text-blue-500"]),onClick:e[10]||(e[10]=o=>t.$emit("boost",s.note)),title:"Boost"},[...e[46]||(e[46]=[r("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],2),r("button",{class:"flex items-center gap-1 text-gray-500 hover:text-blue-500 transition-colors",onClick:e[11]||(e[11]=o=>t.$emit("quote",s.note)),title:"Quote"},[...e[47]||(e[47]=[r("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})],-1)])]),r("button",{class:J(["flex items-center gap-1 transition-colors",s.note.liked_by_user?"text-yellow-500":"text-gray-500 hover:text-blue-500"]),onClick:e[12]||(e[12]=o=>t.$emit("like",s.note)),title:"Like"},[(g(),h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:s.note.liked_by_user?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...e[48]||(e[48]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"},null,-1)])],8,it)),r("span",null,f(((b=s.note.counts)==null?void 0:b.likes)||0),1)],2),s.note.related_activity_count>0||s.note.related_activity_count?(g(),h("button",{key:1,class:"flex items-center gap-1 text-gray-500 hover:text-blue-500 transition-colors",onClick:e[13]||(e[13]=o=>t.$emit("history",s.note)),title:"View History"},[...e[49]||(e[49]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])])):v("",!0),r("button",{class:"flex items-center gap-1 text-gray-500 hover:text-blue-500 transition-colors",onClick:e[14]||(e[14]=o=>t.$emit("thread",s.note)),title:"View Thread"},[e[50]||(e[50]=r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 492.43313 470.25731"},[r("g",{transform:"matrix(0.75674108,0,0,0.70536422,57.817645,55.147289)"},[r("path",{d:"m 16.695312,-2.5546875 c -10.7064892,0 -19.2499995,8.5435103 -19.2499995,19.2499995 v 38.957032 c 0,29.137041 23.5058235,52.640626 52.6425785,52.640626 H 64.228516 V 403.70703 H 50.087891 c -29.136755,0 -52.6425785,23.50358 -52.6425785,52.64063 v 38.95703 c 0,10.7065 8.5434901,19.25 19.2499995,19.25 H 384 c 10.71306,0 19.25,-8.53506 19.25,-19.25 v -38.95703 c 0,-29.13649 -23.50414,-52.64063 -52.64063,-52.64063 H 336.4668 v -28.2832 h 30.83789 c 38.29372,10e-6 69.33789,-31.04205 69.33789,-69.33594 v -66.7832 c 0,-17.11722 13.71869,-30.83789 30.83594,-30.83789 h 27.82617 c 10.71308,0 19.25,-8.53502 19.25,-19.25 0,-10.7065 -8.54352,-19.25 -19.25,-19.25 h -27.82617 c -38.29404,0 -69.33789,31.04386 -69.3379,69.33789 v 66.7832 c 0,17.11687 -13.71907,30.83594 -30.83593,30.83594 H 336.4668 V 108.29297 h 14.14257 c 29.13649,0 52.64063,-23.504139 52.64063,-52.640626 V 16.695312 C 403.25,5.9803688 394.71306,-2.5546875 384,-2.5546875 Z m 19.25,38.4999995 H 364.75 v 19.707032 c 0,7.961761 -6.18114,14.140625 -14.14258,14.140625 H 50.087891 c -7.961438,0 -14.142579,-6.178863 -14.142579,-14.140625 z M 102.72852,108.29297 H 297.9668 v 28.2832 H 102.72852 Z m 0,66.7832 H 297.9668 v 28.28125 H 102.72852 Z m 0,66.7832 H 297.9668 v 28.28125 H 102.72852 Z m 0,66.78321 H 297.9668 v 28.28125 H 102.72852 Z m 0,66.78125 H 297.9668 v 28.2832 H 102.72852 Z m -52.640629,66.7832 H 350.60937 c 7.96039,0 14.14063,6.18025 14.14063,14.14063 v 19.70703 H 35.945312 v -19.70703 c 0,-7.96177 6.181139,-14.14063 14.142579,-14.14063 z"})])],-1)),r("span",null,f(((k=s.note.counts)==null?void 0:k.replies)||0),1)])],64)):v("",!0),s.note.actions&&s.note.actions.view?(g(),h("a",{key:1,href:s.note.actions.view,target:"_blank",class:"flex items-center gap-1 text-gray-500 hover:text-blue-500 transition-colors",title:"View Original"},[...e[51]||(e[51]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)])],8,lt)):v("",!0),s.note.activitypub_json?(g(),h("button",{key:2,class:"flex items-center gap-1 text-gray-500 hover:text-blue-500 transition-colors",onClick:e[15]||(e[15]=o=>t.$emit("json",s.note)),title:"View Activity JSON"},[...e[52]||(e[52]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})],-1)])])):v("",!0)]),s.note.parent?(g(),h("div",rt,[e[53]||(e[53]=r("div",{class:"text-xs text-gray-500 mb-2 flex items-center gap-1 font-semibold uppercase tracking-wider"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})]),F(" In reply to: ")],-1)),K(a,{note:s.note.parent,permissions:s.permissions,onReply:e[16]||(e[16]=o=>t.$emit("reply",o)),onBoost:e[17]||(e[17]=o=>t.$emit("boost",o)),onLike:e[18]||(e[18]=o=>t.$emit("like",o)),onHistory:e[19]||(e[19]=o=>t.$emit("history",o)),onThread:e[20]||(e[20]=o=>t.$emit("thread",o)),onJson:e[21]||(e[21]=o=>t.$emit("json",o)),onLightbox:e[22]||(e[22]=o=>t.$emit("lightbox",o)),onDelete:e[23]||(e[23]=o=>t.$emit("delete",o)),onEdit:e[24]||(e[24]=o=>t.$emit("edit",o)),onVote:e[25]||(e[25]=o=>t.$emit("vote",o))},null,8,["note","permissions"])])):v("",!0),s.note.quote?(g(),h("div",dt,[e[54]||(e[54]=r("div",{class:"text-xs text-gray-500 mb-2 flex items-center gap-1 font-semibold uppercase tracking-wider"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})]),F(" Quoting: ")],-1)),K(a,{note:s.note.quote,permissions:s.permissions,onReply:e[26]||(e[26]=o=>t.$emit("reply",o)),onBoost:e[27]||(e[27]=o=>t.$emit("boost",o)),onQuote:e[28]||(e[28]=o=>t.$emit("quote",o)),onLike:e[29]||(e[29]=o=>t.$emit("like",o)),onHistory:e[30]||(e[30]=o=>t.$emit("history",o)),onThread:e[31]||(e[31]=o=>t.$emit("thread",o)),onJson:e[32]||(e[32]=o=>t.$emit("json",o)),onLightbox:e[33]||(e[33]=o=>t.$emit("lightbox",o)),onDelete:e[34]||(e[34]=o=>t.$emit("delete",o)),onEdit:e[35]||(e[35]=o=>t.$emit("edit",o)),onVote:e[36]||(e[36]=o=>t.$emit("vote",o))},null,8,["note","permissions"])])):v("",!0),re(t.$slots,"reply-editor")])],2)])}const ut=O(te,[["render",at]]),ct={props:{open:{type:Boolean,default:!1},title:{type:String,default:""},inset:{type:Boolean,default:!1}},emits:["closed"],mounted(){document.body.appendChild(this.$el)},watch:{open(t){t?(document.body.style.overflow="hidden",this._escHandler=e=>{e.key==="Escape"&&this.$emit("closed")},document.addEventListener("keydown",this._escHandler)):(document.body.style.overflow="",this._escHandler&&document.removeEventListener("keydown",this._escHandler))}},beforeUnmount(){document.body.style.overflow="",this._escHandler&&document.removeEventListener("keydown",this._escHandler),this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},M=window.Vue.createElementVNode,gt=window.Vue.toDisplayString,E=window.Vue.openBlock,A=window.Vue.createElementBlock,Q=window.Vue.createCommentVNode,W=window.Vue.renderSlot,ht=window.Vue.normalizeStyle,mt=window.Vue.withModifiers,wt={key:0,style:{position:"fixed",inset:"0","z-index":"9999"}},pt={key:0,class:"ap-stack-header"},yt={class:"ap-stack-title"},vt={style:{height:"1rem",width:"1rem"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},bt={key:1,class:"ap-stack-footer"};function ft(t,e,s,d,n,l){return E(),A("div",null,[s.open?(E(),A("div",wt,[M("div",{class:"ap-stack-overlay",style:{position:"absolute",inset:"0"},onClick:e[0]||(e[0]=a=>t.$emit("closed"))}),M("div",{class:"ap-stack-panel",style:{position:"absolute",top:"0.5rem",bottom:"0.5rem",right:"0.5rem",width:"100%","max-width":"48rem"},onClick:e[2]||(e[2]=mt(()=>{},["stop"]))},[s.title?(E(),A("div",pt,[M("h2",yt,gt(s.title),1),M("button",{onClick:e[1]||(e[1]=a=>t.$emit("closed")),class:"ap-stack-close-btn"},[(E(),A("svg",vt,[...e[3]||(e[3]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])]))])])):Q("",!0),M("div",{class:"ap-stack-content",style:ht({padding:s.inset?"0":"1.5rem"})},[W(t.$slots,"default")],4),t.$slots["footer-end"]?(E(),A("div",bt,[W(t.$slots,"footer-end")])):Q("",!0)])])):Q("",!0)])}const kt=O(ct,[["render",ft]]),xt={components:{ActivityPubNote:ut,ApStack:kt},props:{initialActors:{type:Array,default:()=>[]},apiUrl:{type:String,required:!0},replyUrl:{type:String,required:!0},likeUrl:{type:String,required:!0},unlikeUrl:{type:String,required:!0},announceUrl:{type:String,required:!0},undoAnnounceUrl:{type:String,required:!0},createNoteUrl:{type:String,default:null},storeNoteUrl:{type:String,default:null},storePollUrl:{type:String,default:null},deleteUrl:{type:String,default:null},updateNoteUrl:{type:String,default:null},linkPreviewUrl:{type:String,default:null},markdownPreviewUrl:{type:String,default:null},batchLinkPreviewUrl:{type:String,default:null}},data(){var t;return{notes:[],page:1,lastPage:1,total:0,total:0,perPage:parseInt(localStorage.getItem("activitypub_per_page"))||25,loading:!1,loading:!1,filter:"all",error:null,localActors:this.initialActors,activeReplyId:null,replyContent:"",replyContentWarning:"",replyActorId:((t=this.initialActors[0])==null?void 0:t.id)||null,sendingReply:!1,lightbox:{open:!1,images:[],index:0},jsonModal:{open:!1,content:""},isCreatingNote:!1,newNote:{content:"",content_warning:"",actor:null},isCreatingPoll:!1,newPoll:{actor:null,content:"",multiple_choice:!1,options:["",""]},isCreatingPoll:!1,newPoll:{actor:null,content:"",multiple_choice:!1,options:["",""]},isCreatingQuote:!1,quotedNote:null,newQuote:{actor:null,content:"",content_warning:"",quote_of:null},showNewDropdown:!1,creating:!1,editingNoteId:null,isViewingHistory:!1,historyNote:null,relatedActivities:[],loadingHistory:!1,isViewingThread:!1,threadItems:[],loadingThread:!1}},computed:{paginationRange(){const t=[],s=this.page-2,d=this.page+2+1;for(let a=1;a<=this.lastPage;a++)(a===1||a===this.lastPage||a>=s&&a<d)&&t.push(a);const n=[];let l;for(let a of t)l&&(a-l===2?n.push(l+1):a-l!==1&&n.push("...")),n.push(a),l=a;return n}},mounted(){this.loadNotes()},methods:{loadNotes(){this.loading||(this.loading=!0,this.error=null,fetch(`${this.apiUrl}?page=${this.page}&per_page=${this.perPage}&filter=${this.filter}`).then(t=>{if(!t.ok)throw new Error("Failed to load");return t.json()}).then(t=>{const e=t.data.map(d=>({...d,showContent:!d.sensitive}));this.notes=e,this.total=t.meta.total,this.lastPage=t.meta.last_page;const s=e.filter(d=>d.needs_preview&&!d.link_preview&&!d.oembed).map(d=>d.id);s.length>0&&this.batchLinkPreviewUrl?this.fetchBatchEnrichment(s):s.length>0&&this.linkPreviewUrl&&e.forEach(d=>{d.needs_preview&&!d.link_preview&&this.fetchLinkPreview(d)})}).catch(t=>{this.error=t.message,this.notes=[],this.total=0}).finally(()=>{this.loading=!1}))},changePage(t){t<1||t>this.lastPage||t===this.page||(this.page=t,this.notes=[],this.loadNotes(),window.scrollTo(0,0))},changePerPage(){localStorage.setItem("activitypub_per_page",this.perPage),this.page=1,this.loadNotes()},fetchBatchEnrichment(t){fetch(this.batchLinkPreviewUrl,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":StatamicConfig.csrfToken},body:JSON.stringify({note_ids:t})}).then(e=>e.json()).then(e=>{if(e.data){const s=e.data;this.notes.forEach(d=>{if(s[d.id]){const n=s[d.id];n.oembed&&(d.oembed=n.oembed),n.link_preview&&!n.oembed&&(d.link_preview=n.link_preview)}})}}).catch(e=>console.error("Enrichment error:",e))},fetchBatchLinkPreviews(t){return this.fetchBatchEnrichment(t)},setFilter(t){this.filter!==t&&(this.filter=t,this.page=1,this.notes=[],this.notes=[],this.loadNotes())},retry(){this.loadNotes()},toggleReply(t){this.activeReplyId===t.id?this.activeReplyId=null:(this.activeReplyId=t.id,this.replyContent=t.actor.handle?`[${t.actor.handle}](${t.actor.url}) `:"",this.replyContentWarning="")},submitReply(t){this.replyContent.trim()&&(this.sendingReply=!0,fetch(this.replyUrl,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":StatamicConfig.csrfToken},body:JSON.stringify({content:this.replyContent,content_warning:this.replyContentWarning,actor:this.replyActorId,in_reply_to:t.id})}).then(e=>e.json()).then(e=>{e.success?(this.activeReplyId=null,this.replyContent="",this.replyContentWarning="",this.$toast.success("Reply sent!")):this.$toast.error(e.message||"Error sending reply")}).catch(e=>{this.$toast.error("Network error")}).finally(()=>{this.sendingReply=!1}))},handleVote({note:t,option:e,callback:s}){const d=this.replyActorId||(this.localActors.length?this.localActors[0].id:null);if(!d){this.$toast.error("No local actor selected"),s(!1);return}fetch(this.replyUrl,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":StatamicConfig.csrfToken},body:JSON.stringify({content:e.name,content_warning:"",actor:d,in_reply_to:t.id})}).then(n=>n.json()).then(n=>{n.success?(this.$toast.success("Vote submitted!"),s(!0)):(this.$toast.error(n.message||"Error submitting vote"),s(!1))}).catch(n=>{this.$toast.error("Network error"),s(!1)})},openLightbox(t,e){this.lightbox.images=t,this.lightbox.index=e,this.lightbox.open=!0,document.body.style.overflow="hidden"},closeLightbox(){this.lightbox.open=!1,document.body.style.overflow=""},lightboxNav(t){let e=this.lightbox.index+t;e<0&&(e=this.lightbox.images.length-1),e>=this.lightbox.images.length&&(e=0),this.lightbox.index=e},toggleLike(t){const e=t.liked_by_user,s=e?this.unlikeUrl:this.likeUrl;t.liked_by_user=!e,t.counts.likes+=e?-1:1,fetch(s,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":StatamicConfig.csrfToken},body:JSON.stringify({object_url:t.actions.view||(t.id?window.location.origin+"/activitypub/notes/"+t.id:"")})}).then(d=>d.json()).then(d=>{d.status!=="success"&&d.status!=="ignored"&&(t.liked_by_user=e,t.counts.likes+=e?1:-1,this.$toast.error(d.message||"Error updating like"))}).catch(d=>{t.liked_by_user=e,t.counts.likes+=e?1:-1,this.$toast.error("Network error")})},toggleBoost(t){const e=t.boosted_by_user,s=e?this.undoAnnounceUrl:this.announceUrl;t.boosted_by_user=!e,t.counts.boosts+=e?-1:1,fetch(s,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":StatamicConfig.csrfToken},body:JSON.stringify({object_url:t.actions.view||(t.id?window.location.origin+"/activitypub/notes/"+t.id:"")})}).then(d=>d.json()).then(d=>{d.status!=="success"&&d.status!=="ignored"?(t.boosted_by_user=e,t.counts.boosts+=e?1:-1,this.$toast.error(d.message||"Error updating boost")):this.$toast.success(e?"Unboosted":"Boosted")}).catch(d=>{t.boosted_by_user=e,t.counts.boosts+=e?1:-1,this.$toast.error("Network error")})},viewJson(t){if(t.activitypub_json)try{this.jsonModal.content=JSON.parse(t.activitypub_json),this.jsonModal.open=!0,document.body.style.overflow="hidden"}catch{this.$toast.error("Invalid JSON")}},closeJsonModal(){this.jsonModal.open=!1,document.body.style.overflow=""},highlightJson(t){return JSON.stringify(t,null,2).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/("(?:[^"\\]|\\.)*")\s*:|("(?:[^"\\]|\\.)*")|\b(true|false)\b|\b(null)\b|(-?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?)/g,(d,n,l,a,b,k)=>n!==void 0?'<span class="ap-json-key">'+n+"</span>:":l!==void 0?'<span class="ap-json-string">'+l+"</span>":a!==void 0?'<span class="ap-json-bool">'+a+"</span>":b!==void 0?'<span class="ap-json-null">'+b+"</span>":k!==void 0?'<span class="ap-json-number">'+k+"</span>":d)},createNote(){var t;this.createNoteUrl&&(this.isCreatingNote=!0,this.editingNoteId=null,this.newNote.actor=(t=this.localActors[0])==null?void 0:t.id,this.newNote.content="",this.newNote.content_warning="")},toggleNewDropdown(){this.showNewDropdown=!this.showNewDropdown},createPollAndClose(){this.showNewDropdown=!1,this.createPoll()},createPoll(){var t;this.storePollUrl&&(this.isCreatingPoll=!0,this.newPoll.actor=(t=this.localActors[0])==null?void 0:t.id,this.newPoll.content="",this.newPoll.multiple_choice=!1,this.newPoll.options=["",""])},closePollModal(){this.isCreatingPoll=!1},addOption(){this.newPoll.options.push("")},removeOption(t){this.newPoll.options.splice(t,1)},submitPoll(){if(!this.newPoll.content.trim()){this.$toast.error("Question is required");return}this.creating=!0;const t=this.newPoll.options.filter(e=>e.trim()!=="");fetch(this.storePollUrl,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":StatamicConfig.csrfToken},body:JSON.stringify({...this.newPoll,options:t})}).then(e=>e.json()).then(e=>{e.success?(this.$toast.success("Poll created successfully"),this.isCreatingPoll=!1,this.page=1,this.notes=[],this.hasMore=!0,this.loadNotes()):this.$toast.error(e.message||"Error creating poll")}).catch(e=>{this.$toast.error("Network error")}).finally(()=>{this.creating=!1})},editNote(t){var s;this.isCreatingNote=!0,this.editingNoteId=t.id;const e=this.localActors.find(d=>t.actor.handle.includes(d.handle)||d.name===t.actor.name);this.newNote.actor=e?e.id:(s=this.localActors[0])==null?void 0:s.id,this.newNote.content=t.raw_content||t.content,this.newNote.content_warning=t.summary||""},closeNoteModal(){this.isCreatingNote=!1,this.editingNoteId=null},submitNote(){if(!this.newNote.content)return;this.creating=!0,console.log(this.editingNoteId,this.updateNoteUrl,this.storeNoteUrl);const t=this.editingNoteId?this.updateNoteUrl:this.storeNoteUrl,e={content:this.newNote.content,content_warning:this.newNote.content_warning};this.editingNoteId?e.id=this.editingNoteId:e.actor=this.newNote.actor,fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":StatamicConfig.csrfToken},body:JSON.stringify(e)}).then(s=>s.json()).then(s=>{s.success?(this.$toast.success(this.editingNoteId?"Note updated":"Note created"),this.closeNoteModal(),this.page=1,this.notes=[],this.hasMore=!0,this.loadNotes()):this.$toast.error(s.message||"Error saving note")}).catch(s=>{this.$toast.error("Network error")}).finally(()=>{this.creating=!1})},openQuoteModal(t){var e;this.quotedNote=t,this.newQuote={actor:((e=this.localActors[0])==null?void 0:e.id)||null,content:"",content_warning:"",quote_of:t.id},this.isCreatingQuote=!0},closeQuoteModal(){this.isCreatingQuote=!1,this.quotedNote=null,this.newQuote={actor:null,content:"",content_warning:"",quote_of:null}},async submitQuote(){if(!this.newQuote.content.trim()){this.$toast.error("Please add your commentary");return}this.creating=!0;const t={actor:this.newQuote.actor,content:this.newQuote.content,content_warning:this.newQuote.content_warning,quote_of:this.newQuote.quote_of};fetch(this.storeNoteUrl,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":StatamicConfig.csrfToken},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{e.success?(this.$toast.success("Quoted successfully"),this.closeQuoteModal(),this.page=1,this.notes=[],this.hasMore=!0,this.loadNotes()):this.$toast.error(e.message||"Error quoting")}).catch(e=>{console.error("Quote error:",e),this.$toast.error("Failed to quote")}).finally(()=>{this.creating=!1})},viewHistory(t){this.isViewingHistory=!0,this.historyNote=t,this.loadingHistory=!0,this.relatedActivities=[];const s=`${this.apiUrl.replace(/\/api\/?$/,"")}/activities/${t.id}`;fetch(s).then(d=>d.json()).then(d=>{this.relatedActivities=d.data}).catch(d=>{this.$toast.error("Failed to load history")}).finally(()=>{this.loadingHistory=!1})},closeHistoryModal(){this.isViewingHistory=!1,this.historyNote=null,this.relatedActivities=[]},viewThread(t){if(!t.actions||!t.actions.thread){this.$toast.error("Cannot view thread for this item");return}this.isViewingThread=!0,this.threadItems=[],this.loadingThread=!0,fetch(t.actions.thread).then(e=>e.json()).then(e=>{let s=e.data.findIndex(d=>d.id===t.id);s===-1&&(s=e.data.length-1),this.threadItems=e.data.map((d,n)=>{let l=0,a=!1;s!==-1&&(n<s?l=n:n===s?(l=n,a=!0):l=s+1);const b={...d,depth:l,is_focus:a,showContent:!d.sensitive};return b.needs_preview&&!b.link_preview&&this.linkPreviewUrl&&this.fetchLinkPreview(b),b})}).catch(e=>{this.$toast.error("Failed to load thread")}).finally(()=>{this.loadingThread=!1})},closeThreadModal(){this.isViewingThread=!1,this.threadItems=[]},deleteItem(t){confirm("Are you sure you want to delete this item?")&&fetch(this.deleteUrl,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":StatamicConfig.csrfToken},body:JSON.stringify({id:t.id})}).then(e=>e.json()).then(e=>{e.success?(this.$toast.success("Item deleted"),this.notes=this.notes.filter(s=>s.id!==t.id)):this.$toast.error(e.message||"Error deleting item")}).catch(e=>{this.$toast.error("Network error")})},fetchLinkPreview(t){fetch(this.linkPreviewUrl,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":StatamicConfig.csrfToken},body:JSON.stringify({note_id:t.id})}).then(e=>e.json()).then(e=>{if(e.data){const s=this.notes.find(n=>n.id===t.id);s&&(s.link_preview=e.data);const d=this.threadItems.find(n=>n.id===t.id);d&&(d.link_preview=e.data)}}).catch(e=>{})}}},i=window.Vue.createElementVNode,V=window.Vue.renderList,C=window.Vue.Fragment,u=window.Vue.openBlock,c=window.Vue.createElementBlock,y=window.Vue.toDisplayString,z=window.Vue.normalizeClass,X=window.Vue.withModifiers,x=window.Vue.createCommentVNode,S=window.Vue.vModelSelect,_=window.Vue.withDirectives,j=window.Vue.vModelText,D=window.Vue.resolveComponent,P=window.Vue.createVNode,N=window.Vue.withCtx,Z=window.Vue.createBlock,_t=window.Vue.vModelCheckbox,Y=window.Vue.normalizeStyle,Ct={class:"max-w-3xl mx-auto"},Nt={class:"flex items-center justify-between mb-3"},Vt={class:"flex rounded-lg p-1 gap-1 border ap-filter-container items-center"},Pt=["onClick"],Mt={key:0,class:"btn-group relative flex items-center ml-2"},St={key:0,class:"absolute right-0 bg-white dark:bg-dark-550 border border-gray-100 dark:border-dark-900 shadow-popover rounded-md z-50 py-1",style:{top:"2.75em",width:"100%","text-align":"left"}},jt={class:"card p-0"},Tt={class:"flex flex-col"},Ht={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},Lt={class:"block sm:inline"},Ut={key:1,class:"py-8 text-center text-gray-400"},Et={class:"flex flex-col divide-y"},At={key:0,class:"mt-4 p-4 rounded-lg border shadow-sm animate-fade-in-down ap-reply-card"},Ot={class:"flex flex-col gap-3"},Bt={class:"flex items-center gap-2"},It=["value"],Rt={class:"mb-3"},Jt={class:"min-h-[150px]"},Qt={class:"flex justify-end gap-2 mt-3"},zt=["onClick","disabled"],Dt={key:2,class:"py-6 px-4 sm:px-6 flex items-center justify-between"},qt={class:"text-sm text-gray-500"},Ft={class:"flex gap-1 items-center"},Kt=["disabled"],Wt=["onClick","disabled"],Xt=["disabled"],Zt={key:3,class:"py-12 text-center text-gray-500"},Yt=["src"],Gt={class:"text-white mt-4"},$t=["innerHTML"],eo={class:"mb-5"},to=["disabled"],oo=["value"],no={class:"mb-5 flex flex-col"},so={class:"mb-3"},io={class:"min-h-[200px]"},lo=["disabled"],ro={class:"mb-5"},ao=["value"],uo={class:"mb-5"},co={class:"mb-5"},go={class:"flex items-center space-x-2 cursor-pointer"},ho={class:"mb-5"},mo={class:"space-y-2"},wo=["onUpdate:modelValue"],po=["onClick"],yo=["disabled"],vo={class:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},bo={class:"mb-5"},fo=["value"],ko={class:"mb-5"},xo={class:"mb-5"},_o=["disabled"],Co={key:0,class:"py-8 text-center text-gray-500"},No={key:1,class:"py-8 text-center text-gray-500"},Vo={key:2,class:"flex flex-col divide-y dark:divide-dark-800"},Po={class:"flex gap-3"},Mo={class:"flex-shrink-0"},So=["src"],jo={class:"flex-1 min-w-0"},To={class:"flex items-center justify-between gap-2"},Ho={class:"flex items-center gap-2"},Lo={class:"font-bold text-sm"},Uo={class:"text-xs text-gray-500"},Eo={class:"text-xs text-gray-400"},Ao=["innerHTML"],Oo={class:"mt-2 flex items-center gap-3"},Bo=["onClick"],Io=["href"],Ro={key:0,class:"py-8 text-center text-gray-500"},Jo={key:1,class:"py-8 text-center text-gray-500"},Qo={key:2,class:"flex flex-col"},zo={key:0,class:"mt-4 p-4 rounded-lg border shadow-sm animate-fade-in-down ap-reply-card"},Do={class:"flex flex-col gap-3"},qo={class:"flex items-center gap-2"},Fo=["value"],Ko={class:"mb-3"},Wo={class:"min-h-[150px]"},Xo={class:"flex justify-end gap-2 mt-3"},Zo=["onClick","disabled"];function Yo(t,e,s,d,n,l){const a=D("markdown-fieldtype"),b=D("activity-pub-note"),k=D("ap-stack");return u(),c("div",Ct,[i("div",Nt,[e[44]||(e[44]=i("h1",null,"Inbox",-1)),i("div",Vt,[(u(),c(C,null,V(["all","activities","mentions"],o=>i("button",{key:o,onClick:m=>l.setFilter(o),class:z(["px-3 py-1 rounded-md text-sm font-medium transition-colors capitalize ap-filter-btn",n.filter===o?"active":"inactive"])},y(o),11,Pt)),64)),s.createNoteUrl?(u(),c("div",Mt,[i("button",{type:"button",onClick:e[0]||(e[0]=(...o)=>l.createNote&&l.createNote(...o)),class:"btn-primary !rounded-r-none pr-3 focus:z-10"}," New Note "),i("button",{type:"button",onClick:e[1]||(e[1]=(...o)=>l.toggleNewDropdown&&l.toggleNewDropdown(...o)),class:"btn-primary !rounded-l-none px-2 border-l border-white/20 -ml-px flex items-center h-full focus:z-10"},[...e[43]||(e[43]=[i("svg",{class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20"},[i("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])]),n.showNewDropdown?(u(),c("div",St,[i("a",{href:"#",onClick:e[2]||(e[2]=X((...o)=>l.createPollAndClose&&l.createPollAndClose(...o),["prevent"])),class:"block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-dark-600"},"New Poll")])):x("",!0)])):x("",!0)])]),i("div",jt,[i("div",Tt,[n.error?(u(),c("div",Ht,[e[45]||(e[45]=i("strong",{class:"font-bold"},"Error!",-1)),i("span",Lt,y(n.error),1),i("button",{class:"underline ml-2",onClick:e[3]||(e[3]=(...o)=>l.retry&&l.retry(...o))},"Retry")])):x("",!0),!n.loading&&n.notes.length===0?(u(),c("div",Ut," Inbox is empty. ")):x("",!0),i("div",Et,[(u(!0),c(C,null,V(n.notes,o=>(u(),Z(b,{key:o.id,note:o,permissions:{update:!!s.updateNoteUrl,delete:!!s.deleteUrl},onReply:l.toggleReply,onBoost:l.toggleBoost,onQuote:l.openQuoteModal,onLike:l.toggleLike,onHistory:l.viewHistory,onThread:l.viewThread,onJson:l.viewJson,onLightbox:e[9]||(e[9]=m=>l.openLightbox(m.attachments,m.index)),onDelete:l.deleteItem,onEdit:l.editNote,onVote:l.handleVote},{"reply-editor":N(()=>[n.activeReplyId===o.id?(u(),c("div",At,[i("div",Ot,[i("div",Bt,[e[46]||(e[46]=i("label",{class:"text-xs text-gray-500 uppercase font-bold"},"Reply As:",-1)),_(i("select",{"onUpdate:modelValue":e[4]||(e[4]=m=>n.replyActorId=m),class:"text-sm rounded-md shadow-sm ap-reply-input"},[(u(!0),c(C,null,V(n.localActors,m=>(u(),c("option",{key:m.id,value:m.id},y(m.name)+" ("+y(m.handle)+")",9,It))),128))],512),[[S,n.replyActorId]])]),i("div",Rt,[_(i("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=m=>n.replyContentWarning=m),placeholder:"Content Warning (optional)",class:"input-text w-full text-sm"},null,512),[[j,n.replyContentWarning]])]),i("div",Jt,[P(a,{value:n.replyContent,config:{cheatsheet:!0,container:"assets",buttons:["bold","italic","unorderedlist","orderedlist","quote","link","image","table"],type:"markdown"},meta:{previewUrl:s.markdownPreviewUrl},onInput:e[6]||(e[6]=m=>n.replyContent=m),"onUpdate:value":e[7]||(e[7]=m=>n.replyContent=m)},null,8,["value","meta"])]),i("div",Qt,[i("button",{type:"button",onClick:e[8]||(e[8]=m=>n.activeReplyId=null),class:"btn"},"Cancel"),i("button",{type:"button",onClick:m=>l.submitReply(o),class:"btn-primary",disabled:n.sendingReply},y(n.sendingReply?"Sending...":"Reply"),9,zt)])])])):x("",!0)]),_:2},1032,["note","permissions","onReply","onBoost","onQuote","onLike","onHistory","onThread","onJson","onDelete","onEdit","onVote"]))),128))]),n.total>0?(u(),c("div",Dt,[i("div",qt," Showing "+y((n.page-1)*n.perPage+1)+" to "+y(Math.min(n.page*n.perPage,n.total))+" of "+y(n.total)+" entries ",1),i("div",Ft,[_(i("select",{"onUpdate:modelValue":e[10]||(e[10]=o=>n.perPage=o),onChange:e[11]||(e[11]=(...o)=>l.changePerPage&&l.changePerPage(...o)),class:"btn btn-sm pr-8 mr-2"},[...e[47]||(e[47]=[i("option",{value:25},"25 / page",-1),i("option",{value:50},"50 / page",-1),i("option",{value:100},"100 / page",-1)])],544),[[S,n.perPage]]),i("button",{class:"btn btn-sm",disabled:n.page<=1||n.loading,onClick:e[12]||(e[12]=o=>l.changePage(n.page-1))},"←",8,Kt),(u(!0),c(C,null,V(l.paginationRange,(o,m)=>(u(),c(C,null,[o==="..."?(u(),c("span",{key:"dots"+m,class:"px-2 py-1 text-gray-400"},"...")):(u(),c("button",{key:o,onClick:p=>l.changePage(o),class:z(["btn btn-sm",{"bg-blue-600 border-blue-600 font-bold":o===n.page}]),disabled:n.loading},y(o),11,Wt))],64))),256)),i("button",{class:"btn btn-sm",disabled:n.page>=n.lastPage||n.loading,onClick:e[13]||(e[13]=o=>l.changePage(n.page+1))},"→",8,Xt)])])):x("",!0),n.loading?(u(),c("div",Zt,[...e[48]||(e[48]=[i("svg",{class:"animate-spin h-8 w-8 mx-auto text-gray-400 mb-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),i("span",null,"Loading...",-1)])])):x("",!0)])]),n.lightbox.open?(u(),c("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/90 flex flex-col items-center justify-center",onClick:e[17]||(e[17]=X((...o)=>l.closeLightbox&&l.closeLightbox(...o),["self"]))},[i("button",{class:"absolute top-4 right-4 text-white text-3xl",onClick:e[14]||(e[14]=(...o)=>l.closeLightbox&&l.closeLightbox(...o))},"×"),i("button",{class:"absolute left-8 text-white text-3xl p-4 bg-white/10 rounded-full hover:bg-white/20",onClick:e[15]||(e[15]=o=>l.lightboxNav(-1))},"‹"),i("button",{class:"absolute right-8 text-white text-3xl p-4 bg-white/10 rounded-full hover:bg-white/20",onClick:e[16]||(e[16]=o=>l.lightboxNav(1))},"›"),i("img",{src:n.lightbox.images[n.lightbox.index].url,class:"max-w-[90vw] max-h-[85vh] object-contain"},null,8,Yt),i("div",Gt,y(n.lightbox.images[n.lightbox.index].description),1)])):x("",!0),P(k,{open:n.jsonModal.open,onClosed:l.closeJsonModal,title:"ActivityPub JSON",inset:""},{"footer-end":N(()=>[i("button",{onClick:e[18]||(e[18]=(...o)=>l.closeJsonModal&&l.closeJsonModal(...o)),class:"btn"},"Close")]),default:N(()=>[i("pre",{class:"ap-json-viewer",innerHTML:l.highlightJson(n.jsonModal.content)},null,8,$t)]),_:1},8,["open","onClosed"]),P(k,{open:n.isCreatingNote,onClosed:l.closeNoteModal,title:n.editingNoteId?"Edit Note":"Create Note"},{"footer-end":N(()=>[i("button",{class:"btn",onClick:e[23]||(e[23]=(...o)=>l.closeNoteModal&&l.closeNoteModal(...o))},"Cancel"),i("button",{class:"btn-primary",onClick:e[24]||(e[24]=(...o)=>l.submitNote&&l.submitNote(...o)),disabled:n.creating},y(n.creating?"Saving...":n.editingNoteId?"Update":"Create"),9,lo)]),default:N(()=>[i("div",eo,[e[49]||(e[49]=i("label",{class:"block text-sm font-bold mb-2"},"Post As",-1)),_(i("select",{"onUpdate:modelValue":e[19]||(e[19]=o=>n.newNote.actor=o),class:"input-text w-full",disabled:!!n.editingNoteId},[(u(!0),c(C,null,V(n.localActors,o=>(u(),c("option",{key:o.id,value:o.id},y(o.name)+" ("+y(o.handle)+")",9,oo))),128))],8,to),[[S,n.newNote.actor]])]),i("div",no,[e[50]||(e[50]=i("label",{class:"block text-sm font-bold mb-2"},"Content",-1)),i("div",so,[_(i("input",{type:"text","onUpdate:modelValue":e[20]||(e[20]=o=>n.newNote.content_warning=o),placeholder:"Content Warning (optional)",class:"input-text w-full"},null,512),[[j,n.newNote.content_warning]])]),i("div",io,[P(a,{value:n.newNote.content,config:{cheatsheet:!0,container:"assets",buttons:["bold","italic","unorderedlist","orderedlist","quote","link","image","table"],type:"markdown"},meta:{previewUrl:s.markdownPreviewUrl},onInput:e[21]||(e[21]=o=>n.newNote.content=o),"onUpdate:value":e[22]||(e[22]=o=>n.newNote.content=o)},null,8,["value","meta"])])])]),_:1},8,["open","onClosed","title"]),P(k,{open:n.isCreatingPoll,onClosed:l.closePollModal,title:"Create Poll"},{"footer-end":N(()=>[i("button",{class:"btn",onClick:e[29]||(e[29]=(...o)=>l.closePollModal&&l.closePollModal(...o))},"Cancel"),i("button",{class:"btn-primary",onClick:e[30]||(e[30]=(...o)=>l.submitPoll&&l.submitPoll(...o)),disabled:n.creating},y(n.creating?"Creating...":"Create Poll"),9,yo)]),default:N(()=>[i("div",ro,[e[51]||(e[51]=i("label",{class:"block text-sm font-bold mb-2"},"Post As",-1)),_(i("select",{"onUpdate:modelValue":e[25]||(e[25]=o=>n.newPoll.actor=o),class:"input-text w-full"},[(u(!0),c(C,null,V(n.localActors,o=>(u(),c("option",{key:o.id,value:o.id},y(o.name)+" ("+y(o.handle)+")",9,ao))),128))],512),[[S,n.newPoll.actor]])]),i("div",uo,[e[52]||(e[52]=i("label",{class:"block text-sm font-bold mb-2"},"Question",-1)),_(i("textarea",{"onUpdate:modelValue":e[26]||(e[26]=o=>n.newPoll.content=o),class:"input-text w-full",rows:"3",placeholder:"Ask a question..."},null,512),[[j,n.newPoll.content]])]),i("div",co,[i("label",go,[_(i("input",{type:"checkbox","onUpdate:modelValue":e[27]||(e[27]=o=>n.newPoll.multiple_choice=o),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[_t,n.newPoll.multiple_choice]]),e[53]||(e[53]=i("span",{class:"text-sm font-bold"},"Allow Multiple Choices (Checkboxes)",-1))])]),i("div",ho,[e[54]||(e[54]=i("label",{class:"block text-sm font-bold mb-2"},"Options",-1)),e[55]||(e[55]=i("div",{class:"text-xs text-gray-500 mb-2"},"Leave options empty for an open-ended question.",-1)),i("div",mo,[(u(!0),c(C,null,V(n.newPoll.options,(o,m)=>(u(),c("div",{key:m,class:"flex items-center gap-2"},[_(i("input",{type:"text","onUpdate:modelValue":p=>n.newPoll.options[m]=p,class:"input-text w-full text-sm",placeholder:"Option text"},null,8,wo),[[j,n.newPoll.options[m]]]),n.newPoll.options.length>2?(u(),c("button",{key:0,onClick:p=>l.removeOption(m),class:"text-red-500 hover:text-red-700"},"×",8,po)):x("",!0)]))),128))]),i("button",{onClick:e[28]||(e[28]=(...o)=>l.addOption&&l.addOption(...o)),class:"mt-2 text-sm text-blue-600 hover:text-blue-800"},"+ Add Option")])]),_:1},8,["open","onClosed"]),P(k,{open:n.isCreatingQuote,onClosed:l.closeQuoteModal,title:"Quote Post"},{"footer-end":N(()=>[i("button",{class:"btn",onClick:e[35]||(e[35]=(...o)=>l.closeQuoteModal&&l.closeQuoteModal(...o))},"Cancel"),i("button",{class:"btn-primary",onClick:e[36]||(e[36]=(...o)=>l.submitQuote&&l.submitQuote(...o)),disabled:n.creating},y(n.creating?"Posting...":"Quote"),9,_o)]),default:N(()=>[i("div",vo,[e[56]||(e[56]=i("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-2"},"Quoting:",-1)),n.quotedNote?(u(),Z(b,{key:0,note:n.quotedNote,permissions:{update:!1,delete:!1},onReply:()=>{},onBoost:()=>{},onQuote:()=>{},onLike:()=>{}},null,8,["note"])):x("",!0)]),i("div",bo,[e[57]||(e[57]=i("label",{class:"block text-sm font-bold mb-2"},"Post As",-1)),_(i("select",{"onUpdate:modelValue":e[31]||(e[31]=o=>n.newQuote.actor=o),class:"input-text w-full"},[(u(!0),c(C,null,V(n.localActors,o=>(u(),c("option",{key:o.id,value:o.id},y(o.name)+" ("+y(o.handle)+") ",9,fo))),128))],512),[[S,n.newQuote.actor]])]),i("div",ko,[e[58]||(e[58]=i("label",{class:"block text-sm font-bold mb-2"},"Content Warning (Optional)",-1)),_(i("input",{type:"text","onUpdate:modelValue":e[32]||(e[32]=o=>n.newQuote.content_warning=o),class:"input-text w-full",placeholder:"Content Warning (optional)"},null,512),[[j,n.newQuote.content_warning]])]),i("div",xo,[e[59]||(e[59]=i("label",{class:"block text-sm font-bold mb-2"},"Your Commentary",-1)),P(a,{value:n.newQuote.content,config:{cheatsheet:!0,container:"assets",buttons:["bold","italic","unorderedlist","orderedlist","quote","link","image","table"],type:"markdown"},onInput:e[33]||(e[33]=o=>n.newQuote.content=o),"onUpdate:value":e[34]||(e[34]=o=>n.newQuote.content=o)},null,8,["value"])])]),_:1},8,["open","onClosed"]),P(k,{open:n.isViewingHistory,onClosed:l.closeHistoryModal,title:"Activity History",inset:""},{default:N(()=>[n.loadingHistory?(u(),c("div",Co," Loading history... ")):n.relatedActivities.length===0?(u(),c("div",No," No related activities found. ")):(u(),c("div",Vo,[(u(!0),c(C,null,V(n.relatedActivities,o=>(u(),c("div",{key:o.id,class:"p-4 hover:bg-gray-50 dark:hover:bg-dark-800 transition-colors"},[i("div",Po,[i("div",Mo,[i("img",{src:o.actor.avatar||"https://www.gravatar.com/avatar/?d=mp",loading:"lazy",class:"w-10 h-10 rounded-full bg-gray-200 object-cover"},null,8,So)]),i("div",jo,[i("div",To,[i("div",Ho,[i("span",Lo,y(o.actor.name),1),i("span",Uo,y(o.type),1)]),i("span",Eo,y(o.date_human),1)]),i("div",{class:"text-sm mt-1 text-gray-700 dark:text-gray-300",innerHTML:o.content},null,8,Ao),i("div",Oo,[o.activitypub_json?(u(),c("button",{key:0,class:"flex items-center gap-1 text-xs text-gray-400 hover:text-blue-500 transition-colors",onClick:m=>l.viewJson(o),title:"View JSON"},[...e[60]||(e[60]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})],-1)])],8,Bo)):x("",!0),o.object?(u(),c("a",{key:1,href:typeof o.object=="string"?o.object:o.object.id,target:"_blank",class:"flex items-center gap-1 text-xs text-gray-400 hover:text-blue-500 transition-colors",title:"View Source"},[...e[61]||(e[61]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)])],8,Io)):x("",!0)])])])]))),128))]))]),_:1},8,["open","onClosed"]),P(k,{open:n.isViewingThread,onClosed:l.closeThreadModal,title:"Thread",inset:""},{default:N(()=>[n.loadingThread?(u(),c("div",Ro," Loading thread... ")):n.threadItems.length===0?(u(),c("div",Jo," Thread is empty. ")):(u(),c("div",Qo,[(u(!0),c(C,null,V(n.threadItems,(o,m)=>(u(),c("div",{key:o.id||m,class:z(["relative",{"bg-blue-50 dark:bg-dark-800":o.is_focus}])},[o.depth>0?(u(),c("div",{key:0,class:"absolute left-6 top-0 bottom-0 border-l-2 border-gray-200 dark:border-gray-700",style:Y({left:o.depth*1.5+"rem"})},null,4)):x("",!0),i("div",{class:"p-4 border-b dark:border-dark-800",style:Y({"margin-left":o.depth*1.5+"rem"})},[P(b,{note:o,permissions:{update:!!s.updateNoteUrl,delete:!!s.deleteUrl},onReply:l.toggleReply,onBoost:l.toggleBoost,onLike:l.toggleLike,onHistory:l.viewHistory,onThread:l.viewThread,onJson:l.viewJson,onLightbox:e[42]||(e[42]=p=>l.openLightbox(p.attachments,p.index)),onDelete:l.deleteItem,onEdit:l.editNote},{"reply-editor":N(()=>[n.activeReplyId===o.id?(u(),c("div",zo,[i("div",Do,[i("div",qo,[e[62]||(e[62]=i("label",{class:"text-xs text-gray-500 uppercase font-bold"},"Reply As:",-1)),_(i("select",{"onUpdate:modelValue":e[37]||(e[37]=p=>n.replyActorId=p),class:"text-sm rounded-md shadow-sm ap-reply-input"},[(u(!0),c(C,null,V(n.localActors,p=>(u(),c("option",{key:p.id,value:p.id},y(p.name)+" ("+y(p.handle)+")",9,Fo))),128))],512),[[S,n.replyActorId]])]),i("div",Ko,[_(i("input",{type:"text","onUpdate:modelValue":e[38]||(e[38]=p=>n.replyContentWarning=p),placeholder:"Content Warning (optional)",class:"input-text w-full text-sm"},null,512),[[j,n.replyContentWarning]])]),i("div",Wo,[P(a,{value:n.replyContent,config:{cheatsheet:!0,container:"assets",buttons:["bold","italic","unorderedlist","orderedlist","quote","link","image","table"]},onInput:e[39]||(e[39]=p=>n.replyContent=p),"onUpdate:value":e[40]||(e[40]=p=>n.replyContent=p)},null,8,["value"])]),i("div",Xo,[i("button",{type:"button",onClick:e[41]||(e[41]=p=>n.activeReplyId=null),class:"btn"},"Cancel"),i("button",{type:"button",onClick:p=>l.submitReply(o),class:"btn-primary",disabled:n.sendingReply},y(n.sendingReply?"Sending...":"Reply"),9,Zo)])])])):x("",!0)]),_:2},1032,["note","permissions","onReply","onBoost","onLike","onHistory","onThread","onJson","onDelete","onEdit"])],4)],2))),128))]))]),_:1},8,["open","onClosed"])])}const Go=O(xt,[["render",Yo],["__scopeId","data-v-b056b8e8"]]),$o={props:{activities:{type:Array,required:!0},pagination:{type:String,default:""}},data(){return{activityData:this.activities,drawer:{open:!1,visible:!1,uuid:"",content:""}}},methods:{showJson(t){const e=this.activityData.find(s=>s.id===t);!e||!e.json||(this.drawer.uuid=t,this.drawer.content=JSON.stringify(e.json,null,2),this.drawer.open=!0,document.body.style.overflow="hidden",setTimeout(()=>{this.drawer.visible=!0},10))},closeJson(){this.drawer.visible=!1,setTimeout(()=>{this.drawer.open=!1,document.body.style.overflow=""},300)}}},en=window.Vue.renderList,tn=window.Vue.Fragment,T=window.Vue.openBlock,H=window.Vue.createElementBlock,on=window.Vue.createCommentVNode,L=window.Vue.toDisplayString,w=window.Vue.createElementVNode,nn=window.Vue.normalizeClass,sn=window.Vue.withKeys,ln={class:"card p-0 overflow-hidden"},rn={class:"flex flex-col divide-y divide-gray-100 dark:divide-gray-800"},dn={class:"flex-shrink-0 pt-1"},an=["src"],un={key:1,class:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-400 font-bold text-sm"},cn={class:"flex-1 min-w-0"},gn={class:"flex items-center justify-between"},hn={class:"flex items-center gap-1 min-w-0"},mn={class:"font-bold text-gray-900 dark:text-gray-100 truncate text-sm"},wn=["title"],pn={class:"text-gray-400 text-xs whitespace-nowrap"},yn={class:"flex items-center gap-2 opacity-50 group-hover:opacity-100 transition-opacity"},vn=["onClick"],bn={class:"mt-1 flex items-start gap-2 text-sm text-gray-700 dark:text-gray-300"},fn=["innerHTML"],kn=["innerHTML"],xn={class:"p-4 border-t border-gray-100 dark:border-gray-800 bg-gray-50 dark:bg-gray-900/50"},_n=["innerHTML"],Cn={class:"flex items-center justify-between px-6 py-4 border-b border-gray-100 dark:border-gray-800 shrink-0 bg-white dark:bg-gray-900"},Nn={class:"flex flex-col gap-1"},Vn={class:"text-xs font-mono text-gray-500"},Pn={class:"flex-1 overflow-auto bg-gray-50 dark:bg-gray-950 p-6"},Mn={class:"bg-white dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-800 overflow-hidden"},Sn={class:"p-4 text-xs font-mono leading-relaxed text-gray-800 dark:text-gray-200 overflow-x-auto"},jn={class:"language-json"},Tn={class:"px-6 py-4 border-t border-gray-100 dark:border-gray-800 bg-gray-50 dark:bg-gray-900 shrink-0 flex justify-end"};function Hn(t,e,s,d,n,l){return T(),H("div",ln,[w("div",rn,[(T(!0),H(tn,null,en(n.activityData,a=>(T(),H("div",{key:a.id,class:"p-4 flex gap-4 hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors group"},[w("div",dn,[a.avatar?(T(),H("img",{key:0,src:a.avatar,class:"w-10 h-10 rounded-full object-cover bg-gray-200 dark:bg-gray-700"},null,8,an)):(T(),H("div",un,L(a.actorName.charAt(0)),1))]),w("div",cn,[w("div",gn,[w("div",hn,[w("span",mn,L(a.actorName),1),w("span",{class:"text-gray-500 text-sm truncate",title:a.actorHandle},L(a.actorHandle),9,wn),e[4]||(e[4]=w("span",{class:"text-gray-400 text-xs"},"•",-1)),w("span",pn,L(a.date),1)]),w("div",yn,[w("button",{type:"button",onClick:b=>l.showJson(a.id),class:"text-gray-400 hover:text-blue-500",title:"View JSON"},[...e[5]||(e[5]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])],8,vn)])]),w("div",bn,[w("span",{class:"text-gray-400 mt-0.5",innerHTML:a.icon},null,8,fn),w("div",{class:"prose prose-sm dark:prose-invert max-w-none leading-snug",innerHTML:a.description},null,8,kn)])])]))),128))]),w("div",xn,[w("div",{innerHTML:s.pagination,class:"pagination-container"},null,8,_n)]),n.drawer.open?(T(),H("div",{key:0,class:"fixed inset-0 z-[100] z-[99]",onKeydown:e[3]||(e[3]=sn((...a)=>l.closeJson&&l.closeJson(...a),["esc"]))},[w("div",{class:"absolute inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity",onClick:e[0]||(e[0]=(...a)=>l.closeJson&&l.closeJson(...a))}),w("div",{class:nn(["absolute inset-y-0 right-0 max-w-2xl w-full bg-white dark:bg-gray-900 shadow-xl flex flex-col transform transition-transform duration-300 ease-spring drawer",{"translate-x-full":!n.drawer.visible,"translate-x-0":n.drawer.visible}])},[w("div",Cn,[w("div",Nn,[e[6]||(e[6]=w("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Payload Inspector",-1)),w("span",Vn,L(n.drawer.uuid),1)]),w("button",{onClick:e[1]||(e[1]=(...a)=>l.closeJson&&l.closeJson(...a)),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"},[...e[7]||(e[7]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),w("div",Pn,[w("div",Mn,[w("pre",Sn,[w("code",jn,L(n.drawer.content),1)])])]),w("div",Tn,[w("button",{onClick:e[2]||(e[2]=(...a)=>l.closeJson&&l.closeJson(...a)),class:"btn"},"Close")])],2)],32)):on("",!0)])}const Ln=O($o,[["render",Hn],["__scopeId","data-v-04507f3e"]]);var $,ee;const Un=((ee=($=window.__STATAMIC__)==null?void 0:$.core)==null?void 0:ee.FieldtypeMixin)||{},En={mixins:[Un],data(){return{selected:this.value}},watch:{value(t){this.selected=t},selected(t){this.update(t)}}},G=window.Vue.toDisplayString,B=window.Vue.openBlock,I=window.Vue.createElementBlock,An=window.Vue.createCommentVNode,On=window.Vue.renderList,Bn=window.Vue.Fragment,In=window.Vue.vModelSelect,Rn=window.Vue.createElementVNode,Jn=window.Vue.withDirectives,Qn={class:"actor-selector-wrapper"},zn={key:0,disabled:"",value:""},Dn=["value"];function qn(t,e,s,d,n,l){return B(),I("div",Qn,[Jn(Rn("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.selected=a),class:"input-text w-full"},[!t.meta.actors||t.meta.actors.length===0?(B(),I("option",zn,G(t.__("No actors found")),1)):An("",!0),(B(!0),I(Bn,null,On(t.meta.actors,a=>(B(),I("option",{key:a.value,value:a.value},G(a.label),9,Dn))),128))],512),[[In,n.selected]])])}const Fn=O(En,[["render",qn]]);Statamic.booting(()=>{Statamic.$components.register("activity-pub-inbox",Go),Statamic.$components.register("activity-pub-log",Ln),Statamic.$components.register("actor_selector-fieldtype",Fn)});
